<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Widget Iframe</title>
    <!-- Load the chat widget from CDN -->
    <script src="https://unpkg.com/@agentman/chat-widget@latest/dist/index.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        #chat-widget {
            height: 100vh;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="chat-widget"></div>
    <script>
        // Initialize the chat widget
        try {
            // Access ChatWidget from the UMD global when loaded from CDN
            const ChatWidget = window['@agentman/chat-widget'].ChatWidget;
            
            const widget = new ChatWidget({
                agentToken: 'demo-token-123',
                apiUrl: 'https://studio-api.agentman.ai',
                containerId: 'chat-widget',
                variant: 'inline', // Best variant for iframe usage
                title: 'Iframe Chat Assistant',
                placeholder: 'Type your message here...',
                initialMessage: 'Hello! I\'m running inside an iframe. This demonstrates how you can embed the Agentman chat widget in isolated contexts. How can I help you today?',
                theme: {
                    textColor: '#111827',
                    backgroundColor: '#ffffff',
                    buttonColor: '#2563eb',
                    buttonTextColor: '#ffffff',
                    agentForegroundColor: '#111827',
                    userForegroundColor: '#ffffff',
                    toggleBackgroundColor: '#2563eb',
                    toggleTextColor: '#ffffff',
                    toggleIconColor: '#ffffff'
                },
                messagePrompts: [
                    { text: "Tell me about iframe integration", message: "How does iframe integration work?" },
                    { text: "What are the benefits?", message: "What are the benefits of using iframes?" },
                    { text: "Show me an example", message: "Can you show me a code example?" }
                ]
            });
            
            console.log('Chat widget initialized successfully in iframe');
        } catch (error) {
            console.error('Failed to initialize chat widget:', error);
            document.body.innerHTML = '<div style="padding: 20px; color: red;">Failed to load chat widget. Please check the console for errors.</div>';
        }
    </script>
</body>
</html>
