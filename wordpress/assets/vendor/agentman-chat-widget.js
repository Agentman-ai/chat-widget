!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ChatWidget",[],t):"object"==typeof exports?exports.ChatWidget=t():e.ChatWidget=t()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var __webpack_modules__={765:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>ChatWidget});var _PersistenceManager__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(317),_ConfigManager__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(974),_StateManager__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(291),_styles_style_manager__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(764),_message_renderer_message_renderer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(589),_message_renderer_offline_parser__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(288),_assets_icons__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(171),_assets_logo__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(794),_utils_icon_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(44),__assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)},__awaiter=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},__generator=function(e,t){var n,a,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(r=0)),r;)try{if(n=1,a&&(o=2&s[0]?a.return:s[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,s[1])).done)return o;switch(a=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},ChatWidget=function(){function ChatWidget(e){var t,n,a,o,r=this;this.resizeTimeout=null,this.isInitializing=!1,this.resizeDebounceTimeout=null,this.isInitialized=!1,this.isOffline=!1,this.lastMessageCount=0,this.persistenceManager=null,this.loadingMessageElement=null,this.loadingStates=["Thinking","Planning","Acting","Generating response"],this.loadingAnimationInterval=null,this.currentLoadingStateIndex=0,this.handleResize=function(){r.resizeTimeout&&window.clearTimeout(r.resizeTimeout),r.resizeTimeout=window.setTimeout((function(){var e=r.stateManager.getState();r.updateUI(e)}),100)},this.handlePromptClick=function(e){var t;if(e.target instanceof HTMLButtonElement){var n=e.target.getAttribute("data-idx");if(null!==n){var a=(null===(t=r.config.messagePrompts)||void 0===t?void 0:t.prompts[Number(n)])||"",o=e.target,i=o.style.backgroundColor,s=o.style.color;if(o.style.backgroundColor="var(--chat-toggle-background-color, var(--chat-header-background-color, #059669))",o.style.color="white",r.stateManager.setOpen(!0),r.updateUI(r.stateManager.getState()),a){console.log("[DEBUG] Sending prompt message:",a),setTimeout((function(){o.style.backgroundColor=i,o.style.color=s}),200);try{r.handleSendMessage(a)}catch(e){console.error("[ERROR] Failed to send prompt message:",e),r.addMessage({id:r.generateUUID(),sender:"agent",content:"Sorry, I encountered an error processing your request. Please try again.",timestamp:(new Date).toISOString(),type:"text"})}}}}},this.handleToggleClick=function(e){e.preventDefault(),e.stopPropagation(),r.toggleChat()},this.handleInputChange=function(e){var t=e.target,n=r.element.querySelector(".am-chat-send");n&&(n.disabled=!t.value.trim()),r.resizeDebounceTimeout&&window.clearTimeout(r.resizeDebounceTimeout),r.resizeDebounceTimeout=window.setTimeout((function(){t.style.height="32px";var e=Math.max(32,Math.min(t.scrollHeight,120));t.style.height="".concat(e,"px")}),100)},this.handleMinimizeClick=function(e){e.preventDefault(),e.stopPropagation(),r.toggleChat()},this.handleSendClick=function(e){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return e.preventDefault(),e.stopPropagation(),[4,this.handleSendMessage()];case 1:return t.sent(),[2]}}))}))},this.handleInputKeypress=function(e){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return"Enter"!==e.key||e.shiftKey?[3,2]:(e.preventDefault(),e.stopPropagation(),e.target.value.trim()?[4,this.handleSendMessage()]:[3,2]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},this.handleExpandClick=function(e){var t,n,a;e.preventDefault(),e.stopPropagation(),r.element.classList.contains("am-chat-expanded")?(r.element.classList.remove("am-chat-expanded"),(a=r.element.querySelector(".am-chat-expand"))&&(a.innerHTML=(null===(t=r.config.icons)||void 0===t?void 0:t.expandIcon)||_assets_icons__WEBPACK_IMPORTED_MODULE_6__.fT)):(r.element.classList.add("am-chat-expanded"),(a=r.element.querySelector(".am-chat-expand"))&&(a.innerHTML=(null===(n=r.config.icons)||void 0===n?void 0:n.collapseIcon)||_assets_icons__WEBPACK_IMPORTED_MODULE_6__.ap))},this.containerId=e.containerId;var i=ChatWidget.instances.get(this.containerId);i&&i.destroy(),ChatWidget.instances.set(this.containerId,this);var s={};e.userBackgroundColor&&(s.userBackgroundColor=e.userBackgroundColor),e.agentBackgroundColor&&(s.agentBackgroundColor=e.agentBackgroundColor),e.agentForegroundColor&&(s.agentForegroundColor=e.agentForegroundColor),e.userForegroundColor&&(s.userForegroundColor=e.userForegroundColor),e.headerBackgroundColor&&(s.headerBackgroundColor=e.headerBackgroundColor),e.headerTextColor&&(s.headerTextColor=e.headerTextColor),e.agentIconColor&&(s.agentIconColor=e.agentIconColor),e.userIconColor&&(s.userIconColor=e.userIconColor),(null===(t=e.theme)||void 0===t?void 0:t.toggleBackgroundColor)&&(s.toggleBackgroundColor=e.theme.toggleBackgroundColor),(null===(n=e.theme)||void 0===n?void 0:n.toggleTextColor)&&(s.toggleTextColor=e.theme.toggleTextColor),(null===(a=e.theme)||void 0===a?void 0:a.toggleIconColor)&&(s.toggleIconColor=e.theme.toggleIconColor);var c=__assign(__assign({},e),{theme:e.theme?__assign(__assign({},e.theme),s):s});if(this.config=this.mergeWithDefaultConfig(c),this.theme=this.initializeTheme(),this.assets=this.initializeAssets(),this.state={isOpen:e.initiallyOpen||!1,isExpanded:!1,isInitialized:!1,isSending:!1,messages:[],error:void 0},this.stateManager=new _StateManager__WEBPACK_IMPORTED_MODULE_2__.f(this.state),this.stateManager.subscribe(this.handleStateChange.bind(this)),this.conversationId=this.generateUUID(),this.configManager=new _ConfigManager__WEBPACK_IMPORTED_MODULE_1__.m(this.config),this.messageRenderer=new _message_renderer_message_renderer__WEBPACK_IMPORTED_MODULE_4__.b,this.styleManager=new _styles_style_manager__WEBPACK_IMPORTED_MODULE_3__.x(e.variant),null===(o=this.config.persistence)||void 0===o?void 0:o.enabled){this.persistenceManager=new _PersistenceManager__WEBPACK_IMPORTED_MODULE_0__.l(this.config.persistence,this.stateManager,this.containerId);var l=this.persistenceManager.getConversationId();l&&(this.conversationId=l),this.persistenceManager.setConversationId(this.conversationId)}this.init()}return ChatWidget.prototype.init=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.loadDependencies()];case 1:return t.sent(),this.isOffline=!1,[3,3];case 2:return e=t.sent(),console.warn("Failed to load dependencies:",e),this.fallbackToOfflineMode(),[3,3];case 3:return this.initialize(),[2]}}))}))},ChatWidget.prototype.loadDependencies=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,a;return __generator(this,(function(o){switch(o.label){case 0:return window.marked?(this.configureMarked(),[2]):[4,this.loadFromCache()];case 1:if(o.sent())return[2];e=0,t=ChatWidget.MARKED_CDNS,o.label=2;case 2:if(!(e<t.length))return[3,7];n=t[e],o.label=3;case 3:return o.trys.push([3,5,,6]),[4,this.loadScript(n)];case 4:return o.sent(),this.configureMarked(),this.cacheLibrary(n),[2];case 5:return a=o.sent(),console.warn("Failed to load from CDN: ".concat(n),a),[3,6];case 6:return e++,[3,2];case 7:throw new Error("All CDNs failed to load")}}))}))},ChatWidget.prototype.loadScript=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,new Promise((function(t,n){var a=document.createElement("script");a.src=e,a.async=!0;var o=setTimeout((function(){n(new Error("Script load timeout"))}),5e3);a.onload=function(){clearTimeout(o),t()},a.onerror=function(){clearTimeout(o),n(new Error("Failed to load script: ".concat(e)))},document.head.appendChild(a)}))]}))}))},ChatWidget.prototype.loadFromCache=function(){return __awaiter(this,void 0,void 0,(function(){var cache,_i,_a,cdn,response,script,error_3;return __generator(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,7,,8]),"caches"in window?[4,caches.open("chat-widget-cache")]:[3,6];case 1:cache=_b.sent(),_i=0,_a=ChatWidget.MARKED_CDNS,_b.label=2;case 2:return _i<_a.length?(cdn=_a[_i],[4,cache.match(cdn)]):[3,6];case 3:return response=_b.sent(),response?[4,response.text()]:[3,5];case 4:return script=_b.sent(),eval(script),this.configureMarked(),[2,!0];case 5:return _i++,[3,2];case 6:return[3,8];case 7:return error_3=_b.sent(),console.warn("Failed to load from cache:",error_3),[3,8];case 8:return[2,!1]}}))}))},ChatWidget.prototype.cacheLibrary=function(e){try{"caches"in window&&caches.open("chat-widget-cache").then((function(t){t.add(e)}))}catch(e){console.warn("Failed to cache library:",e)}},ChatWidget.prototype.configureMarked=function(){window.marked&&window.marked.setOptions({gfm:!0,breaks:!0,headerIds:!1,mangle:!1,sanitize:!0})},ChatWidget.prototype.fallbackToOfflineMode=function(){this.isOffline=!0,window.marked={setOptions:function(){},parse:function(e){return _message_renderer_offline_parser__WEBPACK_IMPORTED_MODULE_5__.j.parse(e)}}},ChatWidget.prototype.mergeWithDefaultConfig=function(e){var t,n,a,o,r,i,s,c,l;return __assign(__assign({},e),{title:e.title||"Chat Assistant",theme:__assign({textColor:"#111827",backgroundColor:"#FFFFFF",buttonColor:"#059669",buttonTextColor:"#FFFFFF"},e.theme),placeholder:e.placeholder||"Type your message...",initiallyOpen:e.initiallyOpen||!1,icons:{closeIcon:(null===(t=e.icons)||void 0===t?void 0:t.closeIcon)||ChatWidget.defaultIcons.closeIcon,sendIcon:(null===(n=e.icons)||void 0===n?void 0:n.sendIcon)||ChatWidget.defaultIcons.sendIcon,minimizeIcon:(null===(a=e.icons)||void 0===a?void 0:a.minimizeIcon)||ChatWidget.defaultIcons.minimizeIcon,maximizeIcon:(null===(o=e.icons)||void 0===o?void 0:o.maximizeIcon)||ChatWidget.defaultIcons.maximizeIcon,expandIcon:(null===(r=e.icons)||void 0===r?void 0:r.expandIcon)||ChatWidget.defaultIcons.expandIcon,collapseIcon:(null===(i=e.icons)||void 0===i?void 0:i.collapseIcon)||ChatWidget.defaultIcons.collapseIcon,reduceIcon:(null===(s=e.icons)||void 0===s?void 0:s.reduceIcon)||ChatWidget.defaultIcons.reduceIcon,userIcon:(null===(c=e.icons)||void 0===c?void 0:c.userIcon)||ChatWidget.defaultIcons.userIcon,agentIcon:(null===(l=e.icons)||void 0===l?void 0:l.agentIcon)||ChatWidget.defaultIcons.agentIcon}})},ChatWidget.prototype.initializeTheme=function(){var e,t,n,a,o,r,i,s,c,l,h,d,g,p,m,u,f,v;return{textColor:(null===(e=this.config.theme)||void 0===e?void 0:e.textColor)||"#111827",backgroundColor:(null===(t=this.config.theme)||void 0===t?void 0:t.backgroundColor)||"#FFFFFF",buttonColor:(null===(n=this.config.theme)||void 0===n?void 0:n.buttonColor)||"#059669",buttonTextColor:(null===(a=this.config.theme)||void 0===a?void 0:a.buttonTextColor)||"#FFFFFF",agentBackgroundColor:this.config.agentBackgroundColor||(null===(o=this.config.theme)||void 0===o?void 0:o.agentBackgroundColor)||"#f3f4f6",userBackgroundColor:this.config.userBackgroundColor||(null===(r=this.config.theme)||void 0===r?void 0:r.userBackgroundColor)||"#ecfdf5",agentForegroundColor:this.config.agentForegroundColor||(null===(i=this.config.theme)||void 0===i?void 0:i.agentForegroundColor)||"#111827",userForegroundColor:this.config.userForegroundColor||(null===(s=this.config.theme)||void 0===s?void 0:s.userForegroundColor)||"#FFFFFF",headerBackgroundColor:this.config.headerBackgroundColor||(null===(c=this.config.theme)||void 0===c?void 0:c.headerBackgroundColor)||"#BE185D",headerTextColor:this.config.headerTextColor||(null===(l=this.config.theme)||void 0===l?void 0:l.headerTextColor)||"#FFFFFF",agentIconColor:(null===(h=this.config.theme)||void 0===h?void 0:h.agentIconColor)||"#BE185D",userIconColor:(null===(d=this.config.theme)||void 0===d?void 0:d.userIconColor)||"#F43F5E",toggleBackgroundColor:(null===(g=this.config.theme)||void 0===g?void 0:g.toggleBackgroundColor)||(null===(p=this.config.theme)||void 0===p?void 0:p.headerBackgroundColor)||"#BE185D",toggleTextColor:(null===(m=this.config.theme)||void 0===m?void 0:m.toggleTextColor)||(null===(u=this.config.theme)||void 0===u?void 0:u.headerTextColor)||"#FFFFFF",toggleIconColor:(null===(f=this.config.theme)||void 0===f?void 0:f.toggleIconColor)||(null===(v=this.config.theme)||void 0===v?void 0:v.headerTextColor)||"#FFFFFF"}},ChatWidget.prototype.initializeAssets=function(){return{logo:(0,_utils_icon_utils__WEBPACK_IMPORTED_MODULE_7__.$)(this.config.logo||_assets_logo__WEBPACK_IMPORTED_MODULE_8__.w,"Main Logo",42),headerLogo:(0,_utils_icon_utils__WEBPACK_IMPORTED_MODULE_7__.$)(this.config.headerLogo||_assets_logo__WEBPACK_IMPORTED_MODULE_8__.w,"Header Logo",32)}},ChatWidget.prototype.initialize=function(){var e=this;if(!this.isInitialized){this.setupOnlineStatusMonitoring(),this.styleManager.injectStyles(),this.createElements(),this.attachEventListeners();var t=!0;if(this.persistenceManager){var n=this.persistenceManager.loadMessages();n.length>0&&(this.stateManager.clearMessages(),n.forEach((function(t){return e.addMessage(t)})),this.lastMessageCount=n.filter((function(e){return"agent"===e.sender})).length,t=!1)}t&&this.initializeChat(),this.updateUI(this.stateManager.getState()),this.updateColors(this.theme),this.isInitialized=!0}},ChatWidget.prototype.applyInitialDimensions=function(e,t){if(e||t){var n=this.element.querySelector(".am-chat-container");n&&(e&&(n.style.height=e),t&&(n.style.width=t))}},ChatWidget.getInstance=function(e){return ChatWidget.instances.get(e)},ChatWidget.prototype.destroy=function(){this.styleManager.cleanup(),this.resizeTimeout&&window.clearTimeout(this.resizeTimeout),this.resizeDebounceTimeout&&window.clearTimeout(this.resizeDebounceTimeout),this.loadingAnimationInterval&&window.clearInterval(this.loadingAnimationInterval),window.removeEventListener("resize",this.handleResize.bind(this));var e=document.querySelector('.am-chat-widget[data-container="'.concat(this.containerId,'"]'));null==e||e.remove(),this.stateManager.clearListeners(),this.styleManager.cleanup(),ChatWidget.instances.delete(this.containerId)},ChatWidget.prototype.clearStorage=function(){this.persistenceManager&&(this.persistenceManager.clearStorage(),this.stateManager.clearMessages())},ChatWidget.destroyAll=function(){Array.from(ChatWidget.instances.values()).forEach((function(e){e.destroy()})),ChatWidget.instances.clear()},ChatWidget.prototype.handleImmediateResize=function(){var e=this.element.querySelector(".am-chat-input");e&&(e.style.height="auto",e.style.height="".concat(Math.min(e.scrollHeight,100),"px"))},ChatWidget.prototype.subscribeToState=function(e){return this.stateManager.subscribe(e)},ChatWidget.prototype.setupForCurrentDevice=function(){if("corner"===this.config.variant){var e=this.element.querySelector(".am-chat-container"),t=this.element.querySelector(".am-chat-input");e&&(window.innerWidth<=480?(e.style.width="100%",e.style.height="100%",e.style.borderRadius="0",e.style.bottom="0",e.style.right="0",this.state.isOpen&&(document.body.style.overflow="hidden")):(e.style.width=this.config.initialWidth||"360px",e.style.height=this.config.initialHeight||"700px",e.style.borderRadius="12px",e.style.bottom="20px",e.style.right="20px",document.body.style.overflow=""),t&&!t.style.height&&(t.style.height="32px"))}},ChatWidget.prototype.handleStateChange=function(e){this.updateUI(e),this.updateToggleButtonStyling()},ChatWidget.prototype.updateToggleButtonStyling=function(){var e=this.element.querySelector(".am-chat-toggle");if(e){e.style.backgroundColor=this.theme.toggleBackgroundColor;var t=e.querySelector(".am-chat-logo");t&&(t.style.color=this.theme.toggleIconColor);var n=e.querySelector(".am-chat-toggle-text");n&&(n.style.color=this.theme.toggleTextColor,n.textContent=this.config.toggleText||"Ask Agentman")}},ChatWidget.prototype.updateUI=function(e){var t=this.element.querySelector(".am-chat-container"),n=this.element.querySelector(".am-chat-toggle");if(this.element.querySelector(".am-chat-message-prompts-container"),t)if("corner"===this.config.variant){console.log("[DEBUG] updateUI for corner variant",{isOpen:e.isOpen,messagePromptsConfig:this.config.messagePrompts});var a=!e.isOpen&&!this.hasUserStartedConversation();console.log("[DEBUG] shouldShowCollapsedUI:",a),a?(console.log("[DEBUG] Showing collapsed prompts"),this.showCollapsedPrompts()):(console.log("[DEBUG] Hiding collapsed prompts"),this.hideCollapsedPrompts()),t.style.display=e.isOpen?"flex":"none",n&&(n.style.display=e.isOpen?"none":"flex")}else t.style.display="flex",n&&(n.style.display="none");"corner"===this.config.variant&&this.setupForCurrentDevice()},ChatWidget.prototype.hasUserStartedConversation=function(){var e=this.stateManager.getState().messages;if(console.log("[DEBUG] Checking conversation status:",{messageCount:e.length,hasInitialMessage:!!this.config.initialMessage,messages:e.map((function(e){return{sender:e.sender,content:e.content.substring(0,30)+"..."}}))}),0===e.length)return console.log("[DEBUG] No messages, conversation not started"),!1;if(1===e.length&&"agent"===e[0].sender&&this.config.initialMessage)return console.log("[DEBUG] Only one message (system welcome), conversation not started"),!1;var t=e.some((function(e){return"user"===e.sender}))||e.length>1;return console.log("[DEBUG] Conversation started:",t),t},ChatWidget.prototype.showCollapsedPrompts=function(){console.log("[DEBUG] showCollapsedPrompts called");var e=this.element.querySelector(".am-chat-message-prompts-container");if(console.log("[DEBUG] Existing prompts element:",e),e)console.log("[DEBUG] Prompts container already exists");else{console.log("[DEBUG] Creating new prompts container"),(e=document.createElement("div")).className="am-chat-message-prompts-container";var t=this.renderMessagePrompts();console.log("[DEBUG] Rendered prompts HTML:",t),e.innerHTML=t;var n=this.element.querySelector(".am-chat-toggle");console.log("[DEBUG] Toggle button found:",!!n),n&&n.parentElement?(console.log("[DEBUG] Inserting prompts before toggle button"),n.parentElement.insertBefore(e,n)):console.log("[DEBUG] Could not find toggle button or its parent"),this.attachPromptListeners()}console.log("[DEBUG] Setting prompts display to block"),e.style.display="block"},ChatWidget.prototype.hideCollapsedPrompts=function(){var e=this.element.querySelector(".am-chat-message-prompts-container");e&&e.remove()},ChatWidget.prototype.isDesktopDevice=function(){return window.innerWidth>768},ChatWidget.prototype.renderMessagePrompts=function(){console.log("[DEBUG] renderMessagePrompts called");var e=this.config.messagePrompts;if(console.log("[DEBUG] messagePrompts config:",e),!this.isDesktopDevice())return console.log("[DEBUG] Not a desktop device, hiding prompts"),"";if(!e||!e.show)return console.log("[DEBUG] Prompts not enabled or missing config"),"";var t=e.welcome_message,n=e.prompts,a=Array.isArray(n)&&n.some((function(e){return!!e})),o=!!t;if(console.log("[DEBUG] Prompt details:",{hasWelcome:o,hasPrompts:a,welcomeMessage:t,prompts:n}),!a&&!o)return console.log("[DEBUG] No welcome message or prompts to show"),"";var r="";return o&&(r+='<div class="am-chat-welcome-message">\n      <div class="am-chat-welcome-header">\n        <div class="am-chat-welcome-avatar">\n          <svg viewBox="0 0 100 100" width="16" height="16" class="am-chat-logo-svg" aria-label="Agentman logo">\n            \x3c!-- Optimized viewBox for better rendering at small sizes --\x3e\n            <g transform="scale(0.2) translate(10,10)">\n              \x3c!-- White background circle --\x3e\n              <ellipse rx="195.69139" ry="195.69139" transform="matrix(1.029699 0 0 1.029699 240.53478 231.5)" fill="white" stroke-width="0"/>\n              \x3c!-- Logo paths --\x3e\n              <path d="M115.170448,367.37098l75.209552-41.95l34.570045,89.914073q-71.559193-7.964036-109.779597-47.964073Z" transform="translate(1.705203 0.000002)" fill="#059669" stroke="#059669" stroke-width="0.964"/>\n              <path d="M115.170448,367.37098l75.209552-41.95l34.570045,89.914073q-71.559193-7.964036-109.779597-47.964073Z" transform="matrix(-1 0 0 1 477.488884 0.213954)" fill="#059669" stroke="#059669" stroke-width="0.964"/>\n              <path d="M239.689307,333.842501l-11.989999,12.523368l7.640737,9.115074-9.00527,28.429999l13.354532,21.66l12.169999-21.66-8.276464-28.429999l7.683584-9.115074-11.577119-12.523368Z" transform="translate(.000003-8.207567)" fill="#059669" stroke-width="0.964"/>\n              <path d="M277.027489,313.607575c2.10968-2.124145,2.109674-7.294472,2.10968-12.616701.000001-4.924048,3.734359-8.575732,5.993261-11.785502c6.850428-9.734066,17.425154-17.270326,32.509567-28.554392c19.581659-14.648281,38.363352-37.839451,38.363352-75.004322s-15.358165-77.557662-47.326267-97.060908-100.336835-21.863731-138.616835,11.230119q-38.28,33.09385-26.47094,84.615075q2.941471,5.424961-4.109265,16.914925c-7.050736,11.489964-5.790737,10.87-13.400737,20.07q-7.61,9.2,14.77,24.588001q8.081429,8.196065,4.040692,25.931176c-4.040737,17.735111,17.930782,25.351045,58.470045,26.015934c6.315019,0,10.285402,4.016302,9.820182,13.53245c2.318232,3.860567,45.195831,4.173208,63.847265,2.124145Z" transform="translate(-4.731067 2.174968)" fill="#059669" stroke-width="0.964"/>\n            </g>\n          </svg>\n          \x3c!-- Fallback for SVG rendering issues --\x3e\n          <span class="am-chat-logo-fallback" aria-hidden="true"></span>\n        </div>\n        <span class="am-chat-welcome-text">ðŸ‘‹ '.concat(t,'</span>\n      </div>\n      <span class="am-chat-welcome-timestamp">Just now</span>\n    </div>')),a&&(r+='<div class="am-chat-message-prompts">',n.forEach((function(e,t){e&&(r+='<button class="am-chat-message-prompt" data-action="suggest" data-idx="'.concat(t,'">').concat(e,"</button>"))})),r+="</div>"),console.log("[DEBUG] Generated HTML:",r),r},ChatWidget.prototype.attachPromptListeners=function(){var e=this;this.element.querySelectorAll(".am-chat-message-prompt").forEach((function(t){t.addEventListener("click",e.handlePromptClick)}))},ChatWidget.prototype.updateTheme=function(e){var t=this;this.config.theme=__assign(__assign({},this.config.theme),e),this.element&&Object.entries(this.config.theme).forEach((function(e){var n=e[0],a=e[1];t.element.style.setProperty("--chat-".concat(n),a)}))},ChatWidget.prototype.updateVariant=function(e){this.config.variant=e,this.styleManager.updateStyles(e),this.element&&(this.element.className="chat-widget chat-widget--".concat(e)),this.setupForCurrentDevice()},ChatWidget.prototype.updateColors=function(e){this.element&&(e.textColor&&this.element.style.setProperty("--chat-text-color",e.textColor),e.backgroundColor&&this.element.style.setProperty("--chat-background-color",e.backgroundColor),e.buttonColor&&this.element.style.setProperty("--chat-button-color",e.buttonColor),e.buttonTextColor&&this.element.style.setProperty("--chat-button-text-color",e.buttonTextColor),e.agentBackgroundColor&&this.element.style.setProperty("--chat-agent-background-color",e.agentBackgroundColor),e.userBackgroundColor&&this.element.style.setProperty("--chat-user-background-color",e.userBackgroundColor),e.agentForegroundColor&&this.element.style.setProperty("--chat-agent-foreground-color",e.agentForegroundColor),e.userForegroundColor&&this.element.style.setProperty("--chat-user-foreground-color",e.userForegroundColor),e.headerBackgroundColor&&this.element.style.setProperty("--chat-header-background-color",e.headerBackgroundColor),e.headerTextColor&&this.element.style.setProperty("--chat-header-text-color",e.headerTextColor),e.agentIconColor&&this.element.style.setProperty("--chat-agent-icon-color",e.agentIconColor),e.userIconColor&&this.element.style.setProperty("--chat-user-icon-color",e.userIconColor),e.toggleBackgroundColor&&this.element.style.setProperty("--chat-toggle-background-color",e.toggleBackgroundColor),e.toggleTextColor&&this.element.style.setProperty("--chat-toggle-text-color",e.toggleTextColor),e.toggleIconColor&&this.element.style.setProperty("--chat-toggle-icon-color",e.toggleIconColor),(e.toggleBackgroundColor||e.toggleTextColor||e.toggleIconColor)&&this.updateToggleButtonStyling())},ChatWidget.prototype.createElements=function(){var e=document.querySelector('.am-chat-widget[data-container="'.concat(this.containerId,'"]'));e&&e.remove(),this.element=document.createElement("div"),this.element.className="am-chat-widget am-chat-widget--".concat(this.config.variant),this.element.setAttribute("data-container",this.containerId);var t="corner"===this.config.variant;if(this.element.innerHTML=this.generateTemplate(t),this.applyInitialDimensions(this.config.initialHeight,this.config.initialWidth),"inline"===this.config.variant){var n=document.getElementById(this.containerId);if(!n)return void console.error('Container with id "'.concat(this.containerId,'" not found'));n.innerHTML="",n.appendChild(this.element)}else document.body.appendChild(this.element)},ChatWidget.prototype.generateTemplate=function(e){var t,n,a;return"\n      ".concat(e?'\n        <button class="am-chat-toggle" style="background-color: '.concat(this.theme.toggleBackgroundColor,' !important;">\n          <div class="am-chat-toggle-content">\n            <div class="am-chat-logo" style="color: ').concat(this.theme.toggleIconColor,' !important;">\n              ').concat(this.assets.logo,'\n            </div>\n            <span class="am-chat-toggle-text" style="color: ').concat(this.theme.toggleTextColor,' !important;">').concat(this.config.toggleText||"Ask Agentman","</span>\n          </div>\n        </button>\n      "):"",'\n      <div class="am-chat-container">\n        <div class="am-chat-header">\n          <div class="am-chat-header-content">\n            <div class="am-chat-logo-title">\n              <div class="am-chat-header-logo">').concat(this.assets.headerLogo,"</div>\n              <span>").concat(this.config.title,'</span>\n            </div>\n            <div class="am-chat-header-actions">\n              <button class="am-chat-expand am-chat-header-button desktop-only">\n                ').concat((null===(t=this.config.icons)||void 0===t?void 0:t.expandIcon)||_assets_icons__WEBPACK_IMPORTED_MODULE_6__.fT,'\n              </button>\n              <button class="am-chat-minimize am-chat-header-button">\n                ').concat((null===(n=this.config.icons)||void 0===n?void 0:n.minimizeIcon)||_assets_icons__WEBPACK_IMPORTED_MODULE_6__.rj,'\n              </button>\n            </div>\n          </div>\n        </div>\n        <div class="am-chat-messages"></div>\n        <div class="am-chat-input-container">\n          <textarea\n            class="am-chat-input"\n            placeholder="').concat(this.config.placeholder||"Type your message...",'">\n          </textarea>\n          <button class="am-chat-send" disabled>\n            ').concat((null===(a=this.config.icons)||void 0===a?void 0:a.sendIcon)||_assets_icons__WEBPACK_IMPORTED_MODULE_6__.tN,'\n          </button>\n        </div>\n        <div class="am-chat-branding">Powered by ').concat(this.config.hideBranding?'<span style="color: #10b981;">Agentman.ai</span>':'<a href="https://agentman.ai" target="_blank" rel="noopener noreferrer">Agentman.ai</a>',"</div>\n      </div>\n    ")},ChatWidget.prototype.attachEventListeners=function(){var e=this,t=this.element.querySelector(".am-chat-toggle"),n=this.element.querySelector(".am-chat-minimize"),a=this.element.querySelector(".am-chat-send"),o=this.element.querySelector(".am-chat-input");t&&t.addEventListener("click",(function(t){t instanceof MouseEvent&&e.handleToggleClick(t)})),n&&n.addEventListener("click",(function(t){t instanceof MouseEvent&&e.handleMinimizeClick(t)})),a&&a.addEventListener("click",(function(t){t instanceof MouseEvent&&e.handleSendClick(t)})),o&&(o.style.height="44px",o.addEventListener("keydown",this.handleInputKeypress),o.addEventListener("input",this.handleInputChange));var r=this.element.querySelector(".am-chat-expand");r&&r.addEventListener("click",this.handleExpandClick),window.addEventListener("resize",(function(){var t;e.handleResize(),e.isDesktopDevice()?(t=document.querySelector(".am-chat-message-prompts-container"))&&(t.style.display=""):(t=document.querySelector(".am-chat-message-prompts-container"))&&(t.style.display="none")}))},ChatWidget.prototype.setupOnlineStatusMonitoring=function(){var e=this;window.addEventListener("online",(function(){e.isOffline&&e.loadDependencies().then((function(){e.isOffline=!1})).catch((function(e){console.warn("Failed to switch to online mode:",e)}))})),window.addEventListener("offline",(function(){e.isOffline=!0}))},ChatWidget.prototype.toggleChat=function(){if("corner"===this.config.variant){var e=!this.stateManager.getState().isOpen;this.stateManager.setOpen(e),this.updateUI(this.stateManager.getState())}},ChatWidget.prototype.initializeChat=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,a;return __generator(this,(function(o){switch(o.label){case 0:if(this.state.isInitialized||this.isInitializing)return[2];this.isInitializing=!0,this.showInitializingMessage(!0),this.lastMessageCount=0,o.label=1;case 1:return o.trys.push([1,4,5,6]),e=this.config.initialMessage||"Hello",[4,fetch("".concat(this.config.apiUrl,"/v2/agentman_runtime/agent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_token:this.config.agentToken,force_load:!1,conversation_id:this.conversationId,user_input:e})})];case 2:if(!(t=o.sent()).ok)throw new Error("HTTP error! status: ".concat(t.status));return[4,t.json()];case 3:return n=o.sent(),this.workflowId=n.workflow_id,n.response&&this.handleInitialResponse(n.response),this.stateManager.setInitialized(!0),[3,6];case 4:return a=o.sent(),console.error("Chat initialization error:",a),this.stateManager.setError("Failed to initialize chat. Please try again."),[3,6];case 5:return this.isInitializing=!1,this.showInitializingMessage(!1),[7];case 6:return[2]}}))}))},ChatWidget.prototype.handleInitialResponse=function(e){var t;if(Array.isArray(e)){void 0===this.lastMessageCount&&(this.lastMessageCount=0);for(var n=0,a=e.slice(this.lastMessageCount);n<a.length;n++){var o=a[n];"ai"===o.type&&this.isValidMessage(o)&&o.content.trim()&&this.addMessage({id:null!==(t=o.id)&&void 0!==t?t:this.generateUUID(),sender:"agent",content:o.content,timestamp:(new Date).toISOString(),type:"text"})}this.lastMessageCount=e.length}else console.error("Invalid response format:",e)},ChatWidget.prototype.showInitializingMessage=function(e){var t=this.element.querySelector(".am-chat-initializing"),n=this.element.querySelector(".am-chat-send"),a=this.element.querySelector(".am-chat-input");t&&(t.style.display=e?"block":"none"),n&&(n.disabled=e),a&&(a.disabled=e)},ChatWidget.prototype.sendMessage=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,a,o,r,i;return __generator(this,(function(s){switch(s.label){case 0:t=this.generateUUID(),n={id:t,sender:"user",content:e,timestamp:(new Date).toISOString(),type:"text"},this.addMessage(n),this.showLoadingIndicator(),s.label=1;case 1:return s.trys.push([1,7,,8]),[4,fetch("".concat(this.config.apiUrl,"/v2/agentman_runtime/agent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_token:this.config.agentToken,force_load:!1,conversation_id:this.conversationId,user_input:e})})];case 2:if(!(a=s.sent()).ok)throw new Error("Failed to send message");return[4,a.json()];case 3:return o=s.sent(),this.hideLoadingIndicator(),o.workflow_id&&(this.workflowId=o.workflow_id),Array.isArray(o.response)?[4,this.handleResponse(o.response)]:[3,5];case 4:return s.sent(),this.persistenceManager&&this.persistenceManager.saveMessages(),[3,6];case 5:console.error("Invalid response format:",o),s.label=6;case 6:return[3,8];case 7:return r=s.sent(),console.error("Message sending error:",r),this.hideLoadingIndicator(),i={id:this.generateUUID(),sender:"agent",content:"Sorry, I encountered an error. Please try again.",timestamp:(new Date).toISOString(),type:"text"},this.addMessage(i),[3,8];case 8:return[2]}}))}))},ChatWidget.prototype.handleSendMessage=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,a,o;return __generator(this,(function(r){switch(r.label){case 0:if(e?t=e.trim():(n=this.element.querySelector(".am-chat-input"),(t=n.value.trim())&&(n.value="",n.style.height="auto")),!t||this.state.isSending)return[2];this.stateManager.setSending(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),(a=this.element.querySelector(".am-chat-send"))&&(a.disabled=!0),[4,this.sendMessage(t)];case 2:return r.sent(),[3,5];case 3:return o=r.sent(),console.error("Error sending message:",o),[3,5];case 4:return this.stateManager.setSending(!1),[7];case 5:return[2]}}))}))},ChatWidget.prototype.addMessage=function(e){var t,n,a=this.element.querySelector(".am-chat-messages");if(a){this.stateManager.addMessage(e),this.persistenceManager&&this.persistenceManager.saveMessages();var o=document.createElement("div");o.className="am-message ".concat(e.sender);var r=this.messageRenderer.render(e),i="user"===e.sender?(null===(t=this.config.icons)||void 0===t?void 0:t.userIcon)||ChatWidget.defaultIcons.userIcon:(null===(n=this.config.icons)||void 0===n?void 0:n.agentIcon)||ChatWidget.defaultIcons.agentIcon,s="string"==typeof i&&(i.includes("<svg")||(0,_utils_icon_utils__WEBPACK_IMPORTED_MODULE_7__.Z)(i))?(0,_utils_icon_utils__WEBPACK_IMPORTED_MODULE_7__.$)(i,"".concat(e.sender," avatar")):i;"user"===e.sender?o.innerHTML='\n        <div class="am-message-content">\n          '.concat(r,"\n        </div>\n      "):o.innerHTML='\n        <div class="am-message-avatar '.concat(e.sender,'" style="color: ').concat(this.theme.agentIconColor,'">\n          ').concat(s,'\n        </div>\n        <div class="am-message-content">\n          ').concat(r,"\n        </div>\n      "),a.appendChild(o),a.scrollTop=a.scrollHeight}else console.error("Messages container not found")},ChatWidget.prototype.handleResponse=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,a,o,r;return __generator(this,(function(i){if(!Array.isArray(e))return console.error("Invalid response format:",e),[2];for(void 0===this.lastMessageCount&&(this.lastMessageCount=0),t=e.slice(this.lastMessageCount),n=0,a=t;n<a.length;n++)"ai"===(o=a[n]).type&&this.isValidMessage(o)&&o.content.trim()&&this.addMessage({id:null!==(r=o.id)&&void 0!==r?r:this.generateUUID(),sender:"agent",content:o.content,timestamp:(new Date).toISOString(),type:"text"});return this.lastMessageCount=e.length,[2]}))}))},ChatWidget.prototype.isValidMessage=function(e){return"object"==typeof e&&null!==e&&"type"in e&&"content"in e&&"string"==typeof e.content},ChatWidget.prototype.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},ChatWidget.prototype.showLoadingIndicator=function(){var e;if(!this.loadingMessageElement){var t=this.element.querySelector(".am-chat-messages");if(t){this.loadingMessageElement=document.createElement("div"),this.loadingMessageElement.className="am-message agent am-chat-loading-message";var n=(null===(e=this.config.icons)||void 0===e?void 0:e.agentIcon)||ChatWidget.defaultIcons.agentIcon,a="string"==typeof n&&(n.includes("<svg")||(0,_utils_icon_utils__WEBPACK_IMPORTED_MODULE_7__.Z)(n))?(0,_utils_icon_utils__WEBPACK_IMPORTED_MODULE_7__.$)(n,"agent avatar"):n;this.loadingMessageElement.innerHTML='\n      <div class="am-message-avatar" style="color: '.concat(this.theme.agentIconColor,'">\n        ').concat(a,'\n      </div>\n      <div class="am-message-content">\n        <div class="loading-container">\n          <div class="loading-bars">\n            <span></span><span></span><span></span>\n          </div>\n          <div class="loading-text-wrapper">\n            <span class="loading-text">').concat(this.loadingStates[0],"...</span>\n          </div>\n        </div>\n      </div>\n    "),t.appendChild(this.loadingMessageElement),t.scrollTop=t.scrollHeight,this.startLoadingAnimation()}}},ChatWidget.prototype.hideLoadingIndicator=function(){var e=this;this.loadingMessageElement&&(this.loadingMessageElement.classList.add("loading-fade-out"),setTimeout((function(){var t;null===(t=e.loadingMessageElement)||void 0===t||t.remove(),e.loadingMessageElement=null}),150)),this.loadingAnimationInterval&&(window.clearInterval(this.loadingAnimationInterval),this.loadingAnimationInterval=null)},ChatWidget.prototype.startLoadingAnimation=function(){var e=this;this.currentLoadingStateIndex=0,this.loadingAnimationInterval&&window.clearInterval(this.loadingAnimationInterval),this.loadingAnimationInterval=window.setInterval((function(){if(e.loadingMessageElement){e.currentLoadingStateIndex=(e.currentLoadingStateIndex+1)%e.loadingStates.length;var t=e.loadingMessageElement.querySelector(".loading-text");t&&(t.textContent="".concat(e.loadingStates[e.currentLoadingStateIndex],"..."))}}),2e3)},ChatWidget.instances=new Map,ChatWidget.defaultIcons={closeIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.VN,sendIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.tN,minimizeIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.rj,maximizeIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.pD,expandIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.fT,collapseIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.ap,reduceIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.XR,userIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.kQ,agentIcon:_assets_icons__WEBPACK_IMPORTED_MODULE_6__.MA},ChatWidget.MARKED_CDNS=["https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.2/marked.min.js","https://cdn.jsdelivr.net/npm/marked@9.1.2/marked.min.js","https://unpkg.com/marked@9.1.2/marked.min.js"],ChatWidget}()},974:(e,t,n)=>{n.d(t,{m:()=>r});var a=n(794),o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)},r=function(){function e(e){this.validateConfig(e),this.config=this.mergeWithDefaults(e),this.theme=this.initializeTheme(),this.assets=this.initializeAssets(),this.icons=this.initializeIcons()}return e.prototype.validateConfig=function(e){if(!e.apiUrl)throw new Error("API URL is required");if(!e.agentToken)throw new Error("Agent token is required")},e.prototype.mergeWithDefaults=function(t){return o(o({},t),{title:t.title||"Chat Assistant",position:t.position||"bottom-right",hideBranding:void 0===t.hideBranding||t.hideBranding,theme:o(o({},e.defaultTheme),t.theme)})},e.prototype.initializeTheme=function(){return o(o({},e.defaultTheme),this.config.theme)},e.prototype.initializeAssets=function(){return{logo:this.config.logo||e.defaultAssets.logo,headerLogo:this.config.headerLogo||e.defaultAssets.headerLogo}},e.prototype.initializeIcons=function(){var t=/^(data:image\/|https:\/\/|\/)/i,n={closeIcon:e.defaultIcons.closeIcon,sendIcon:e.defaultIcons.sendIcon,minimizeIcon:e.defaultIcons.minimizeIcon,maximizeIcon:e.defaultIcons.maximizeIcon,expandIcon:e.defaultIcons.expandIcon,reduceIcon:e.defaultIcons.reduceIcon};return this.config.icons&&Object.entries(this.config.icons).forEach((function(e){var a=e[0],o=e[1];o&&t.test(o)&&(n[a]=o)})),n},e.prototype.getConfig=function(){return this.config},e.prototype.getTheme=function(){return this.theme},e.prototype.getAssets=function(){return this.assets},e.prototype.getIcons=function(){return this.icons},e.prototype.getCSSVariables=function(){return{"--chat-primary-color":this.theme.userBackgroundColor,"--chat-secondary-color":this.theme.agentBackgroundColor,"--chat-text-color":this.theme.textColor,"--chat-background-color":this.theme.backgroundColor,"--chat-button-color":this.theme.buttonColor,"--chat-button-text-color":this.theme.buttonTextColor}},e.prototype.updateTheme=function(e){this.theme=o(o({},this.theme),e)},e.prototype.updateAssets=function(e){this.assets=this.initializeAssets()},e.prototype.updateIcons=function(e){this.icons=this.initializeIcons()},e.defaultTheme={userBackgroundColor:"#10b981",agentBackgroundColor:"#6c757d",textColor:"#212529",backgroundColor:"#ffffff",buttonColor:"#007bff",buttonTextColor:"#ffffff",agentForegroundColor:"#ffffff",userForegroundColor:"#ffffff",headerBackgroundColor:"#f3f4f6",headerTextColor:"#111827",agentIconColor:"#ffffff",userIconColor:"#ffffff",toggleBackgroundColor:"#10b981",toggleTextColor:"#ffffff",toggleIconColor:"#ffffff"},e.defaultAssets={logo:a.w,headerLogo:a.w},e.defaultIcons={closeIcon:"/icons/close-icon.svg",sendIcon:"/icons/send-icon.svg",minimizeIcon:"/icons/minimize-icon.svg",maximizeIcon:"/icons/maximize-icon.svg",expandIcon:"/icons/resize-icon.svg",reduceIcon:"/icons/resize-icon.svg"},e}()},317:(e,t,n)=>{n.d(t,{l:()=>a});var a=function(){function e(e,t,n){this.conversationId=null,this.config={enabled:!0===e.enabled,days:e.days||7,key:e.key},this.stateManager=t,this.containerId=n}return e.prototype.setConversationId=function(e){this.conversationId=e},e.prototype.getConversationId=function(){try{if(!this.config.enabled)return null;var e=localStorage.getItem(this.getStorageKey());return e&&JSON.parse(e).conversationId||null}catch(e){return console.error("[PersistenceManager] Error getting conversation ID:",e),null}},e.prototype.loadMessages=function(){try{if(!this.config.enabled)return[];var e=this.getStorageKey();console.log("[PersistenceManager] Loading messages from localStorage key: ".concat(e));var t=localStorage.getItem(e);if(!t)return console.log("[PersistenceManager] No saved messages found"),[];var n=JSON.parse(t),a=864e5*(this.config.days||7);return Date.now()-n.timestamp>a?(console.log("[PersistenceManager] Stored messages expired (".concat(this.config.days," days), removing")),localStorage.removeItem(e),[]):(n.conversationId&&(this.conversationId=n.conversationId,console.log("[PersistenceManager] Found stored conversation ID: ".concat(n.conversationId))),Array.isArray(n.messages)&&n.messages.length>0?(console.log("[PersistenceManager] Loaded ".concat(n.messages.length," messages from storage")),n.messages):[])}catch(e){return console.error("[PersistenceManager] Error loading messages:",e),[]}},e.prototype.saveMessages=function(){try{if(!this.config.enabled)return;var e=this.getStorageKey(),t=this.stateManager.getState().messages,n={version:1,messages:t,timestamp:Date.now()};this.conversationId&&(n.conversationId=this.conversationId),localStorage.setItem(e,JSON.stringify(n)),console.log("[PersistenceManager] Saved ".concat(t.length," messages to localStorage key: ").concat(e))}catch(e){console.error("[PersistenceManager] Error saving messages:",e)}},e.prototype.clearStorage=function(){try{var e=this.getStorageKey();localStorage.removeItem(e),console.log("[PersistenceManager] Storage cleared")}catch(e){console.error("[PersistenceManager] Error clearing storage:",e)}},e.prototype.getStorageKey=function(){return this.config.key||"chatwidget_".concat(this.containerId,"_data")},e}()},291:(e,t,n)=>{n.d(t,{f:()=>r});var a=function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},o=function(e,t,n){if(n||2===arguments.length)for(var a,o=0,r=t.length;o<r;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))},r=function(){function e(e){this.state=e||{isOpen:!1,isExpanded:!1,isInitialized:!1,isSending:!1,messages:[],error:void 0},this.listeners=new Set}return e.prototype.getState=function(){return a({},this.state)},e.prototype.subscribe=function(e){var t=this;return this.listeners.add(e),function(){return t.listeners.delete(e)}},e.prototype.setState=function(e){var t=this.state;this.state=a(a({},this.state),e),JSON.stringify(t)!==JSON.stringify(this.state)&&this.notifyListeners()},e.prototype.notifyListeners=function(){var e=this;this.listeners.forEach((function(t){return t(e.getState())}))},e.prototype.toggleChat=function(){this.setState({isOpen:!this.state.isOpen})},e.prototype.toggleExpand=function(){this.setState({isExpanded:!this.state.isExpanded})},e.prototype.setOpen=function(e){this.setState({isOpen:e})},e.prototype.setInitialized=function(e){this.setState({isInitialized:e})},e.prototype.setSending=function(e){this.setState({isSending:e})},e.prototype.addMessage=function(e){this.setState({messages:o(o([],this.state.messages,!0),[e],!1)})},e.prototype.setError=function(e){this.setState({error:e})},e.prototype.clearMessages=function(){this.setState({messages:[]})},e.prototype.updateMessage=function(e,t){var n=this.state.messages.map((function(n){return n.id===e?a(a({},n),t):n}));this.setState({messages:n})},e.prototype.deleteMessage=function(e){var t=this.state.messages.filter((function(t){return t.id!==e}));this.setState({messages:t})},e.prototype.getMessageById=function(e){return this.state.messages.find((function(t){return t.id===e}))},e.prototype.getLastMessage=function(){return this.state.messages[this.state.messages.length-1]},e.prototype.getMessageCount=function(){return this.state.messages.length},e.prototype.clearListeners=function(){this.listeners.clear()},e}()},171:(e,t,n)=>{n.d(t,{MA:()=>o,VN:()=>r,XR:()=>l,ap:()=>d,fT:()=>h,kQ:()=>a,pD:()=>c,rj:()=>s,tN:()=>i});var a='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <title>User Avatar</title>\n  \x3c!-- Head circle --\x3e\n  <circle cx="12" cy="8" r="4" fill="var(--color-primary, currentColor)"/>\n  \x3c!-- Body shape --\x3e\n  <path d="M4 20.5C4 16.9101 7.58172 14 12 14C16.4183 14 20 16.9101 20 20.5C20 21.3284 19.3284 22 18.5 22H5.5C4.67157 22 4 21.3284 4 20.5Z" fill="var(--color-primary, currentColor)"/>\n</svg>',o='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="124px" height="124px" viewBox="0 0 124 124" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <title>Chatbot</title>\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="chatbot" transform="translate(0.240000, 0.000001)" fill="var(--color-primary, currentColor)" fill-rule="nonzero">\n      <path d="M24.27019,31 C24.2784569,36.1327728 27.7637741,40.6075243 32.73833,41.8721293 C35.099976,48.1569141 39.431827,53.5088152 45.0866,57.1281293 C44.3471654,57.4058937 43.8247627,58.0733511 43.7327809,58.8578611 C43.6407991,59.6423711 43.9946407,60.4125659 44.64977,60.8538393 C55.0247501,67.7153296 68.4952499,67.7153296 78.87023,60.8538393 C79.5253525,60.4125617 79.8791888,59.6423693 79.7872074,58.8578625 C79.6952259,58.0733557 79.172829,57.4058994 78.4334,57.1281293 C84.088173,53.5088152 88.420024,48.1569141 90.78167,41.8721293 C94.7428952,40.8754896 97.8475392,37.8015723 98.8835278,33.8504556 C99.9195163,29.8993388 98.7225759,25.6975398 95.76,22.8854693 L95.76,10.4452293 C97.3278721,9.54001797 98.0922752,7.69458559 97.6237033,5.94585154 C97.1551314,4.19711748 95.5704227,2.98112772 93.76,2.98112772 C91.9495773,2.98112772 90.3648686,4.19711748 89.8962967,5.94585154 C89.4277248,7.69458559 90.1921279,9.54001797 91.76,10.4452293 L91.76,20.4239993 C91.44451,20.3121793 91.12206,20.2162993 90.79571,20.1299993 C86.2607114,8.02254917 74.6889091,-7.10542736e-15 61.760005,-7.10542736e-15 C48.8311009,-7.10542736e-15 37.2592986,8.02254917 32.7243,20.1299993 C32.39795,20.2162993 32.0755,20.3121893 31.76001,20.4239993 L31.76001,10.4452293 C33.3278821,9.54001797 34.0922852,7.69458559 33.6237133,5.94585154 C33.1551414,4.19711748 31.5704327,2.98112772 29.76001,2.98112772 C27.9495873,2.98112772 26.3648786,4.19711748 25.8963067,5.94585154 C25.4277348,7.69458559 26.1921379,9.54001797 27.76001,10.4452293 L27.76001,22.8854693 C25.5326388,24.9969123 24.27019,27.9308996 24.27019,31 Z M61.76,5.99999933 C75.5671187,5.99999933 86.76,17.1928806 86.76,30.9999993 C86.76,44.8071181 75.5671187,55.9999993 61.76,55.9999993 C47.9528813,55.9999993 36.76,44.8071181 36.76,30.9999993 C36.76,17.1928806 47.9528813,5.99999933 61.76,5.99999933 Z" id="Shape"></path>\n      <path d="M61.76,46.9999993 C66.5102954,46.9942652 70.6033731,43.6529773 71.56,38.9999993 L51.96,38.9999993 C52.9166094,43.6529879 57.0096978,46.9942845 61.76,46.9999993 Z" id="Path"></path>\n      <path d="M52.7599993,29.8099993 L56.81,25.7599993 C57.9782267,24.583544 58.0780478,22.7178819 57.0420223,21.4234894 C56.0059967,20.129097 54.1637763,19.8178356 52.7599993,20.6999993 C51.757201,20.0634263 50.4872908,20.0235573 49.4465354,20.5959728 C48.40578,21.1683882 47.7594027,22.2622153 47.7599993,23.4499993 C47.7594177,24.3151954 48.1009007,25.1455382 48.71,25.7599993 L52.7599993,29.8099993 Z" id="Path"></path>\n      <path d="M70.7599993,29.8099993 L74.81,25.7599993 C75.9782267,24.583544 76.0780478,22.7178819 75.0420223,21.4234894 C74.0059967,20.129097 72.1637763,19.8178356 70.7599993,20.6999993 C69.757201,20.0634263 68.4872908,20.0235573 67.4465354,20.5959728 C66.40578,21.1683882 65.7594027,22.2622153 65.7599993,23.4499993 C65.7594177,24.3151954 66.1009007,25.1455382 66.71,25.7599993 L70.7599993,29.8099993 Z" id="Path"></path>\n      <path d="M123.13,62.6599993 C119.92,59.2199993 115.34,56.6599993 109.12,54.8599993 C108.273247,54.6133588 107.400757,54.4657067 106.52,54.4199993 C101.413221,54.1448554 96.3214954,55.1876743 91.73405,57.4482593 C91.5984208,57.5155555 91.4703224,57.597066 91.35191,57.6914193 L86.91,61.2199993 C71.7471354,71.5911931 51.7728646,71.5911931 36.61,61.2199993 L32.16811,57.6914393 C32.0498678,57.597208 31.9219541,57.5157983 31.78652,57.4485793 C27.1989424,55.1877609 22.107,54.1448275 17,54.4199993 C16.1192429,54.4657067 15.246753,54.6133588 14.4,54.8599993 C8.18,56.6599993 3.6,59.2199993 0.39,62.6599993 L0,63.0799993 L0.48,63.4099993 C4.18638331,66.0583697 8.28656842,68.106775 12.63,69.4799993 C14.2757754,69.9026778 15.9710991,70.1011383 17.67,70.0699993 C19.62,70.0699993 21.66005,69.8799993 23.76,69.6899993 C25.04223,69.5798893 26.34545,69.4613593 27.64513,69.3888493 C28.1950732,69.3586217 28.733232,69.5559716 29.1332554,69.9345645 C29.5332787,70.3131574 29.7599318,70.839646 29.76,71.3904193 L29.76,91.9999993 C29.7610921,100.643889 33.2585911,108.919779 39.4567352,114.944713 C45.6548794,120.969648 54.0265505,124.231239 62.667,123.987399 C80.094,123.505159 93.76,108.766389 93.76,91.3326193 L93.76,71.3904193 C93.7600792,70.8396529 93.9867371,70.3131749 94.3867591,69.9345907 C94.7867812,69.5560066 95.3249337,69.3586621 95.87487,69.3888893 C97.17455,69.4613993 98.47778,69.5798893 99.76,69.6900393 C101.86,69.8800393 103.9,70.0700393 105.84,70.0700393 C107.545492,70.1011545 109.24742,69.9027084 110.9,69.4800393 C115.239389,68.1044897 119.335927,66.0562207 123.04,63.4100393 L123.52,63.0800393 L123.13,62.6599993 Z" id="Path"></path>\n    </g>\n  </g>\n</svg>',r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--chat-header-text-color, currentColor)">\n  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n</svg>',i='<svg enable-background="new 0 0 32 32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n  <g id="Arrow_Up_Circle">\n    <path d="M16,0C7.163,0,0,7.164,0,16c0,8.837,7.163,16,16,16c8.836,0,16-7.163,16-16C32,7.164,24.836,0,16,0z M16,30 C8.268,30,2,23.732,2,16S8.268,2,16,2c7.732,0,14,6.268,14,14S23.732,30,16,30z" fill="var(--chat-header-text-color, currentColor)"/>\n    <path d="M16.715,6.293C16.527,6.107,16.264,6,16,6c-0.263,0-0.526,0.108-0.714,0.293l-6.999,6.899 c-0.395,0.391-0.394,1.024,0,1.414c0.395,0.391,1.034,0.391,1.429,0l5.275-5.2V25c0,0.552,0.452,1,1.01,1 c0.558,0,1.01-0.448,1.01-1V9.407l5.275,5.2c0.394,0.39,1.034,0.39,1.428,0c0.394-0.391,0.394-1.024,0-1.414L16.715,6.293z" fill="var(--chat-header-text-color, currentColor)"/>\n  </g>\n</svg>',s='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 9L12 15L18 9" stroke="var(--chat-header-text-color, currentColor)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',c='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--chat-header-text-color, currentColor)">\n  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>\n</svg>',l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5">\n  <path stroke-linecap="round" stroke="var(--chat-header-text-color, currentColor)" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" />\n</svg>',h='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--chat-header-text-color, currentColor)">\n  <path d="M3 3h7v2H5v5H3V3m18 0h-7v2h5v5h2V3M3 21h7v-2H5v-5H3v7m18 0h-7v-2h5v-5h2v7"/>\n</svg>',d='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--chat-header-text-color, currentColor)">\n  <path d="M9 3H5v4h2V5h2V3m10 0h-4v2h2v2h2V3M9 21H5v-4h2v2h2v2m10-4h-2v2h-2v2h4v-4"/>\n</svg>'},794:(e,t,n)=>{n.d(t,{w:()=>a});var a='\n<svg id="eGF4vShlzWg1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 482 463" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" project-id="b6a2902621314759b6f55f35963e502f" export-id="3ac2b3de3acd4688a4d0e052043a141a" cached="false">\n  <style>\n    .main-color {\n      fill: var(--chat-toggle-icon-color, --chat-header-text-color, #10b981);\n    }\n  </style>\n  <ellipse rx="195.69139" ry="195.69139" transform="matrix(1.029699 0 0 1.029699 240.53478 231.5)" class="main-color" stroke-width="0"/>\n  <path d="M115.170448,367.37098l75.209552-41.95l34.570045,89.914073q-71.559193-7.964036-109.779597-47.964073Z" transform="translate(1.705203 0.000002)" fill="#fff" stroke="#fff" stroke-width="0.964"/>\n  <path d="M115.170448,367.37098l75.209552-41.95l34.570045,89.914073q-71.559193-7.964036-109.779597-47.964073Z" transform="matrix(-1 0 0 1 477.488884 0.213954)" fill="#fff" stroke="#fff" stroke-width="0.964"/>\n  <path d="" fill="none" stroke="#3f5787" stroke-width="0.964"/>\n  <path d="M239.689307,333.842501l-11.989999,12.523368l7.640737,9.115074-9.00527,28.429999l13.354532,21.66l12.169999-21.66-8.276464-28.429999l7.683584-9.115074-11.577119-12.523368Z" transform="translate(.000003-8.207567)" fill="#fff" stroke-width="0.964"/>\n  <path d="M277.027489,313.607575c2.10968-2.124145,2.109674-7.294472,2.10968-12.616701.000001-4.924048,3.734359-8.575732,5.993261-11.785502c6.850428-9.734066,17.425154-17.270326,32.509567-28.554392c19.581659-14.648281,38.363352-37.839451,38.363352-75.004322s-15.358165-77.557662-47.326267-97.060908-100.336835-21.863731-138.616835,11.230119q-38.28,33.09385-26.47094,84.615075q2.941471,5.424961-4.109265,16.914925c-7.050736,11.489964-5.790737,10.87-13.400737,20.07q-7.61,9.2,14.77,24.588001q8.081429,8.196065,4.040692,25.931176c-4.040737,17.735111,17.930782,25.351045,58.470045,26.015934c6.315019,0,10.285402,4.016302,9.820182,13.53245c2.318232,3.860567,45.195831,4.173208,63.847265,2.124145Z" transform="translate(-4.731067 2.174968)" fill="#fff" stroke-width="0.964"/>\n  <g transform="translate(-1.999999 1)">\n    <path d="M245.9733,169.12822c0-15.53699,12.59522-28.13221,28.13221-28.13221s28.13221,12.59522,28.13221,28.13221-12.59522,28.13221-28.13221,28.13221-28.13221-12.59522-28.13221-28.13221Zm28.13221,16.48705c9.10555,0,16.48705-7.3815,16.48705-16.48705s-7.3815-16.48705-16.48705-16.48705-16.48705,7.3815-16.48705,16.48705s7.3815,16.48705,16.48705,16.48705Z" transform="matrix(.869702 0 0 0.869702 29.215138 13.949797)" class="main-color" stroke-width="0"/>\n    <ellipse rx="12.075348" ry="12.075348" transform="translate(205.701579 163.375556)" class="main-color" stroke-width="0"/>\n    <path d="M181.65805,163.37556c0-13.2238,10.72001-23.94381,23.94382-23.94381c3.66235,0,7.13266.82225,10.23639,2.29221l-1.90827,3.5391c-2.53417-1.16714-5.35513-1.81808-8.32812-1.81808-11.00735,0-19.93057,8.92323-19.93057,19.93059s8.92322,19.93059,19.93057,19.93059c2.7639,0,5.3964-.5626,7.78923-1.57954l2.86146,3.09941c-3.20793,1.59589-6.8245,2.49335-10.65068,2.49335-13.22381,0-23.94382-10.72001-23.94382-23.94381l-.00001-.00001Z" transform="translate(-.294799 0)" class="main-color" stroke-width="0"/>\n    <path d="M282.21447,221.07121c10.36489,0,18.76729,8.40244,18.76729,18.76737s-8.4024,18.76737-18.76729,18.76737c-2.06817,0-4.05821-.33454-5.91895-.95246l.40538-3.19396c1.7145.64687,3.5727,1.00082,5.51357,1.00082c8.62762,0,15.62168-6.99411,15.62168-15.62178s-6.99406-15.62178-15.62168-15.62178c-.56983,0-1.13253.03051-1.68657.08999l.4052-3.19253c.42343-.02855.85071-.04306,1.28137-.04306v.00002Z" transform="translate(-.294799 0.000001)" class="main-color" stroke-width="0"/>\n    <ellipse rx="12.075348" ry="12.075348" transform="matrix(.818722 0 0 0.818719 201.720047 112.620951)" class="main-color" stroke-width="0"/>\n    <ellipse rx="12.075348" ry="12.075348" transform="matrix(.818722 0 0 0.818719 232.659876 121.50729)" class="main-color" stroke-width="0"/>\n    <ellipse rx="12.382248" ry="12.382248" transform="matrix(.910778 0 0 0.950271 282.214464 239.661329)" class="main-color" stroke-width="0"/>\n    <ellipse rx="14.374568" ry="14.374568" transform="translate(289.307806 110.097611)" class="main-color" stroke-width="0"/>\n    <ellipse rx="13.63993" ry="13.63993" transform="translate(323.793572 185.845218)" class="main-color" stroke-width="0"/>\n    <ellipse rx="14.309665" ry="14.309665" transform="matrix(.771673 0 0 0.771673 240.96831 199.507461)" fill="#d2dbed" stroke-width="0"/>\n    <ellipse rx="14.309665" ry="14.309665" transform="matrix(.771673 0 0 0.771673 240.96831 199.507461)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(1 0 0 0.934365 258.59969 181.205336)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(1 0 0 0.514936 278.399015 177.174522)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(1 0 0 0.386956 319.978123 142.907789)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(1 0 0 0.231676 198.393736 116.13011)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(-.707107 0.707107-.295051-.295051 243.232709 195.973864)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(-.707107 0.707107-.186101-.186101 259.29762 141.857073)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(-.938368-.345637 0.090967-.246966 281.751813 143.498375)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(0 0.999992-.386956 0 249.980637 159.560138)" class="main-color" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(0 0.999992-.319024 0 325.523655 159.560138)" fill="#d2dbed" stroke-width="0"/>\n    <rect width="7.630899" height="118.396225" rx="0" ry="0" transform="matrix(0 0.999992-.319024 0 325.523655 159.560138)" class="main-color" stroke-width="0"/>\n  </g>\n</svg>\n'},589:(e,t,n)=>{n.d(t,{b:()=>l});var a=function(){function e(e){this.emojiMap=e}return e.prototype.processText=function(e,t){var n=e;return n=this.sanitizeText(n),!1!==t.enableMarkdown&&window.marked?(window.marked.setOptions({gfm:!0,breaks:!0,headerIds:!1,mangle:!1,sanitize:!0}),n=(n=window.marked.parse(n)).replace(/<a\s+(?:[^>]*?)href="([^"]*)"([^>]*?)>/gi,'<a href="$1" target="_blank" rel="noopener noreferrer" $2>')):n=this.applyMarkdown(n),n},e.prototype.sanitizeText=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},e.prototype.replaceEmoji=function(e){var t=this;return e.replace(/:\)|:\(|:D|;\)|<3/g,(function(e){return t.emojiMap[e]||e}))},e.prototype.applyMarkdown=function(e){var t=e;return(t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>')).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>")},e}(),o=function(){function e(){}return e.prototype.containsSvg=function(e){return e.includes("<svg")&&e.includes("</svg>")},e.prototype.isPureSvg=function(e){var t=e.trim();return t.startsWith("<svg")&&t.endsWith("</svg>")},e.prototype.processSvg=function(e){var t=this.cleanSvg(e);return'<div class="chat-svg-wrapper">'.concat(t,"</div>")},e.prototype.splitContent=function(e){for(var t=[],n=0;;){var a=e.indexOf("<svg",n);if(-1===a){n<e.length&&t.push(e.slice(n));break}a>n&&t.push(e.slice(n,a));var o=e.indexOf("</svg>",a);if(-1===o){t.push(e.slice(n));break}t.push(e.slice(a,o+6)),n=o+6}return t},e.prototype.cleanSvg=function(e){return e.replace(/`/g,"").trim().replace(/^svg\s*/,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/on\w+="[^"]*"/g,"").replace(/javascript:/g,"")},e}(),r={":)":"ðŸ˜Š",":(":"ðŸ˜¢",":D":"ðŸ˜ƒ",";)":"ðŸ˜‰","<3":"â¤ï¸",":+1:":"ðŸ‘",":-1:":"ðŸ‘Ž",":wave:":"ðŸ‘‹",":thinking:":"ðŸ¤”",":bulb:":"ðŸ’¡"},i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},s=function(){function e(){}return e.prototype.renderHtml=function(e){return this.sanitizeHtml(e)},e.prototype.renderCustom=function(e){if(!e.data)return e.content;switch(e.data.customType){case"image":return this.renderImage(e.data);case"button":return this.renderButton(e.data);case"card":return this.renderCard(e.data);case"carousel":return this.renderCarousel(e.data);case"quickReplies":return this.renderQuickReplies(e.data);default:return e.content}},e.prototype.renderImage=function(e){var t=e.url,n=e.alt,a=e.width,o=e.height;return'\n      <div class="chat-image">\n        <img \n          src="'.concat(this.sanitizeUrl(t),'" \n          alt="').concat(this.sanitizeText(n||""),'"\n          ').concat(a?'width="'.concat(a,'"'):"","\n          ").concat(o?'height="'.concat(o,'"'):"",'\n          loading="lazy"\n        >\n      </div>\n    ')},e.prototype.renderButton=function(e){var t=e.text,n=e.action,a=e.style,o=void 0===a?"primary":a;return'\n      <button \n        class="chat-button chat-button--'.concat(this.sanitizeText(o),'"\n        data-action="').concat(this.sanitizeText(n),'"\n      >\n        ').concat(this.sanitizeText(t),"\n      </button>\n    ")},e.prototype.renderCard=function(e){var t=this,n=e.title,a=e.description,o=e.image,r=e.buttons;return'\n      <div class="chat-card">\n        '.concat(o?this.renderImage(o):"",'\n        <div class="chat-card__content">\n          ').concat(n?'<h4 class="chat-card__title">'.concat(this.sanitizeText(n),"</h4>"):"","\n          ").concat(a?'<p class="chat-card__description">'.concat(this.sanitizeText(a),"</p>"):"","\n          ").concat(r?'\n            <div class="chat-card__actions">\n              '.concat(r.map((function(e){return t.renderButton(e)})).join(""),"\n            </div>\n          "):"","\n        </div>\n      </div>\n    ")},e.prototype.renderCarousel=function(e){var t=this,n=e.items;return Array.isArray(n)?'\n      <div class="chat-carousel">\n        '.concat(n.map((function(e){return t.renderCard(e)})).join(""),"\n      </div>\n    "):""},e.prototype.renderQuickReplies=function(e){var t=this,n=e.replies;return Array.isArray(n)?'\n      <div class="chat-quick-replies">\n        '.concat(n.map((function(e){return t.renderButton(i(i({},e),{style:"quick-reply"}))})).join(""),"\n      </div>\n    "):""},e.prototype.sanitizeHtml=function(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/on\w+="[^"]*"/g,"").replace(/javascript:/gi,"").replace(/data:/gi,"").replace(/vbscript:/gi,"")},e.prototype.sanitizeText=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},e.prototype.sanitizeUrl=function(e){try{var t=new URL(e);return["http:","https:"].includes(t.protocol)?e:"#"}catch(e){return"#"}},e}(),c=function(){return c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},l=function(){function e(t,n){void 0===t&&(t={}),void 0===n&&(n={}),this.options=c(c({},e.defaultOptions),t);var i=Object.entries(n).filter((function(e){return"string"==typeof e[1]}));this.emojiMap=c(c({},r),Object.fromEntries(i)),this.textProcessor=new a(this.emojiMap),this.svgProcessor=new o,this.customRenderer=new s}return e.prototype.render=function(e){if(!(null==e?void 0:e.content))return"";try{var t=void 0;switch(e.type){case"html":t=this.options.enableHtml?this.sanitizeHtml(e.content):this.textProcessor.processText(e.content,this.options);break;case"svg":t=this.options.enableSvg?this.svgProcessor.processSvg(e.content):e.content;break;case"custom":t=this.customRenderer.renderCustom(e);break;default:return this.processTextWithSvg(e.content)}return t}catch(e){return console.error("Error rendering message:",e),'<div class="message-error">Error rendering message</div>'}},e.prototype.processTextWithSvg=function(e){for(var t=e.match(/```svg([\s\S]*?)```/g)||[],n=e.split(/```svg[\s\S]*?```/),a="",o=0;o<n.length;o++)if(n[o]&&(a+=this.textProcessor.processText(n[o],this.options)),t[o]){var r=t[o].replace(/```svg\s*|\s*```/g,"");a+=this.svgProcessor.processSvg(r)}return a},e.prototype.sanitizeHtml=function(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")},e.defaultOptions={enableMarkdown:!0,enableHtml:!1,enableEmoji:!0,enableLinks:!0,enableSvg:!0},e}()},288:(e,t,n)=>{n.d(t,{j:()=>a});var a=function(){function e(){}return e.parse=function(e){var t=this;try{var n=e;this.rules.codeBlock.pattern.test(n)&&(n=n.replace(this.rules.codeBlock.pattern,this.rules.codeBlock.replace)),n=n.replace(this.rules.h3.pattern,this.rules.h3.replace).replace(this.rules.h2.pattern,this.rules.h2.replace).replace(this.rules.h1.pattern,this.rules.h1.replace);var a=void 0;if(a=n.match(new RegExp(this.rules.bulletList.pattern.source,"gm"))){var o=a.map((function(e){return e.replace(t.rules.bulletList.pattern,t.rules.bulletList.replace)})).join("");n=n.replace(new RegExp(this.rules.bulletList.pattern.source,"gm"),this.rules.bulletList.wrapper.replace("$1",o))}if(a=n.match(new RegExp(this.rules.numberList.pattern.source,"gm"))){var r=a.map((function(e){return e.replace(t.rules.numberList.pattern,t.rules.numberList.replace)})).join("");n=n.replace(new RegExp(this.rules.numberList.pattern.source,"gm"),this.rules.numberList.wrapper.replace("$1",r))}return(n=(n=(n=n.replace(this.rules.bold.pattern,this.rules.bold.replace).replace(this.rules.italic.pattern,this.rules.italic.replace).replace(this.rules.inlineCode.pattern,this.rules.inlineCode.replace)).replace(this.rules.markdownLink.pattern,this.rules.markdownLink.replace).replace(this.rules.autoLink.pattern,this.rules.autoLink.replace)).replace(this.rules.blockquote.pattern,this.rules.blockquote.replace)).replace(this.rules.lineBreak.pattern,this.rules.lineBreak.replace)}catch(t){return console.warn("Offline parser error:",t),e}},e.sanitizeUrl=function(e){try{var t=new URL(e);return["http:","https:"].includes(t.protocol)?e:"#"}catch(e){return"#"}},e.rules={h1:{pattern:/^#\s+(.+)$/gm,replace:"<h1>$1</h1>"},h2:{pattern:/^##\s+(.+)$/gm,replace:"<h2>$1</h2>"},h3:{pattern:/^###\s+(.+)$/gm,replace:"<h3>$1</h3>"},bold:{pattern:/\*\*(.*?)\*\*/g,replace:"<strong>$1</strong>"},italic:{pattern:/\*(.*?)\*/g,replace:"<em>$1</em>"},markdownLink:{pattern:/\[([^\]]+)\]\(([^)]+)\)/g,replace:'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'},autoLink:{pattern:/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g,replace:'<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>'},inlineCode:{pattern:/`([^`]+)`/g,replace:"<code>$1</code>"},codeBlock:{pattern:/```([\s\S]*?)```/g,replace:"<pre><code>$1</code></pre>"},bulletList:{pattern:/^\s*[-*+]\s+(.+)/gm,replace:"<li>$1</li>",wrapper:"<ul>$1</ul>"},numberList:{pattern:/^\s*\d+\.\s+(.+)/gm,replace:"<li>$1</li>",wrapper:"<ol>$1</ol>"},blockquote:{pattern:/^>\s+(.+)/gm,replace:"<blockquote>$1</blockquote>"},lineBreak:{pattern:/\n/g,replace:"<br>"}},e}()},764:(e,t,n)=>{n.d(t,{x:()=>d});var a="\n  .am-chat-widget {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n    z-index: 1000;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .am-chat-container {\n    background: var(--chat-background-color, #FFFFFF);\n    flex-direction: column;\n    overflow: hidden;\n    display: flex;\n    width: 360px;\n    height: 700px;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n    flex: 1;\n  }\n\n  .am-chat-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 12px;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n    min-height: 48px;\n    background: var(--chat-header-background-color, #059669);\n    color: var(--chat-header-text-color, #FFFFFF);\n  }\n\n  .am-chat-header-content {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n  }\n\n  .am-chat-logo-title {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    font-size: 16px;\n  }\n\n  .am-chat-logo {\n    width: 38px;\n    height: 38px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-shrink: 0;\n  }\n\n  .am-chat-logo svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  .am-chat-header-logo {\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-shrink: 0;\n  }\n\n  .am-chat-header-logo svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  .am-chat-header h3 {\n    margin: 0;\n    font-size: 16px;\n    font-weight: 500;\n    color: inherit !important;\n  }\n\n  .am-chat-header button {\n    background: none;\n    padding: 4px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .am-chat-header button svg {\n    width: 20px;\n    height: 20px;\n    fill: var(--chat-header-text-color, #FFFFFF);\n  }\n\n  .am-chat-header button:hover {\n    opacity: 0.8;\n  }\n\n  .am-chat-header-actions {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .am-chat-header-button {\n    background: none;\n    border: none;\n    padding: 4px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: filter 0.2s;\n  }\n\n  .am-chat-header-button:hover {\n    filter: brightness(1.5);\n  }\n\n  .am-chat-header-button svg {\n    width: 20px;\n    height: 20px;\n  }\n\n  .am-chat-messages {\n    flex: 1 1 auto;\n    overflow-y: auto;\n    padding: 16px;\n    min-height: 0;\n    background: white;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .am-chat-avatar {\n    width: 32px;\n    height: 32px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-shrink: 0;\n  }\n\n  .am-chat-avatar.agent {\n    background: var(--chat-header-background-color, #BE185D);\n  }\n\n  .am-chat-avatar.user {\n    background: var(--chat-user-background-color, #F43F5E);\n  }\n\n  .am-chat-avatar img, .am-chat-avatar svg {\n    width: 20px;\n    height: 20px;\n  }\n\n  .am-chat-avatar.agent svg {\n    fill: var(--chat-agent-icon-color, #FFFFFF);\n  }\n\n  .am-chat-avatar.user svg {\n    fill: var(--chat-user-icon-color, #FFFFFF);\n  }\n\n  .am-chat-branding {\n    text-align: left;\n    font-size: 10px;\n    padding: 4px 16px;\n    color: #9CA3AF;\n    background: white;\n  }\n\n  .am-chat-branding a {\n    color: #059669;\n    text-decoration: none;\n    font-weight: 500;\n  }\n\n  .am-chat-branding a:hover {\n    text-decoration: underline;\n  }\n\n  .am-chat-input-container {\n    display: flex;\n    align-items: center;\n    padding: 8px 16px 8px;\n    background: white;\n    border-top: 1px solid rgba(0, 0, 0, 0.05);\n  }\n\n  .am-chat-input-wrapper {\n    position: relative;\n    width: 100%;\n  }\n\n  .am-chat-input {\n    flex: 1;\n    min-height: 44px;\n    max-height: 120px;\n    padding: 10px 12px 6px 12px;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    border-radius: 8px;\n    font-size: 14px;\n    line-height: 20px;\n    resize: none;\n    overflow-y: auto;\n    background: white;\n    box-sizing: border-box;\n  }\n\n  .am-chat-send {\n    margin-left: 8px;\n    width: 32px;\n    height: 32px;\n    padding: 6px;\n    background: var(--chat-header-background-color, #059669);\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: filter 0.2s;\n  }\n\n  .am-chat-send:hover {\n    filter: brightness(1.5);\n  }\n\n  .am-chat-send:disabled {\n    cursor: not-allowed;\n    opacity: 0.8;\n  }\n\n  .am-chat-send svg {\n    width: 20px;\n    height: 20px;\n  }\n\n  .am-chat-send:disabled svg {\n    opacity: 0.8;\n  }\n\n  .am-chat-initializing {\n    padding: 16px;\n    text-align: center;\n    color: #6B7280;\n  }\n\n  .desktop-only {\n    display: none;\n  }\n\n  @media (min-width: 768px) {\n    .desktop-only {\n      display: flex;\n    }\n  }\n\n  .am-chat-toggle {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    border: none;\n    border-radius: 100px;\n    padding: 0;\n    cursor: pointer;\n    background: none;\n    transition: transform 0.2s;\n    z-index: 1000;\n  }\n\n  .am-chat-toggle:hover {\n    transform: scale(1.05);\n  }\n\n  .am-chat-toggle-content {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    background: var(--chat-header-background-color, #059669);\n    color: var(--chat-header-text-color, #FFFFFF);\n    padding: 8px 16px 8px 8px;\n    border-radius: 100px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  }\n\n  .am-chat-toggle-text {\n    font-size: 14px;\n    font-weight: 500;\n  }\n\n  .am-chat-expanded {\n    position: fixed !important;\n    top: 12px !important;\n    right: 0 !important;\n    bottom: 12px !important;\n    width: 100vw !important;\n    margin: 0 !important;\n    border-radius: 0 !important;\n    transition: all 0.3s ease-in-out !important;\n    display: flex !important;\n    justify-content: center !important;\n  }\n\n  .am-chat-expanded .am-chat-container {\n    width: 66.67vw !important;\n    max-width: 700px !important;\n    height: calc(95vh - 24px) !important;\n    border-radius: 8px !important;\n    transition: all 0.3s ease-in-out !important;\n  }\n\n  .am-chat-expanded .am-chat-messages {\n    height: calc(95vh - 148px) !important; /* 24px margins + 124px for header and input */\n  }\n\n  .am-chat-minimize {\n    border: none;\n    background: none;\n    cursor: pointer;\n  }\n\n  /* Override any external styles that might affect the header text */\n  .am-chat-header * {\n    color: inherit !important;\n  }\n",o='\n  .am-message {\n    margin-bottom: 8px;\n    display: flex;\n    gap: 8px;\n    align-items: flex-start;\n    flex-direction: row;\n  }\n\n  .am-message.user {\n    flex-direction: row-reverse;\n    margin-top: 16px;\n    text-align: right;\n  }\n\n  .am-message-content {\n    padding: 8px 12px;\n    border-radius: 8px;\n    font-size: 14px;\n    max-width: 85%;\n    word-wrap: break-word;\n    line-height: 1.4;\n  }\n\n  .am-message.agent .am-message-content {\n    background: var(--chat-agent-background-color, #f3f4f6);\n    color: var(--chat-agent-foreground-color, #111827);\n    border: 1px solid rgba(0, 0, 0, 0.05);\n  }\n\n  .am-message.user .am-message-content {\n    background: var(--chat-user-background-color, #ecfdf5);\n    color: var(--chat-user-foreground-color, #111827);\n    margin-right: 12px; /* Add some margin on the right side */\n    border: 1px solid rgba(0, 0, 0, 0.05);\n    margin-top: 8px;\n    margin-bottom: 8px;\n    max-width: 90%; /* Allow user messages to be slightly wider */\n    align-self: flex-end; /* Align to the right */\n    text-align: left; /* Keep text left-aligned within the bubble */\n  }\n\n  // Content formatting - Reduce spacing\n  .am-message.agent .am-message-content br {\n    content: "";\n    display: block;\n    margin-top: 0.2em;\n  }\n\n  .am-message-avatar {\n    width: 24px;\n    height: 24px;\n    flex-shrink: 0;\n    display: inline-flex;\n    align-items: center;\n    margin-top: 4px;\n  }\n\n  .am-message-avatar img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n  .am-message.user .am-message-avatar {\n    width: 28px;\n    height: 28px;\n    margin-top: 16px;\n  }\n  \n\n  /* Typography and spacing */\n  .am-message-content p {\n    margin: 0 0 8px 0;\n  }\n\n  .am-message-content p:last-child {\n    margin-bottom: 0;\n  }  \n\n  /* Enhanced Lists styling */\n  .am-message-content ul,\n  .am-message-content ol {\n    margin: 4px 0;\n    padding-left: 20px;\n    list-style-position: outside;\n  }\n\n  .am-message-content ul {\n    list-style-type: disc;\n  }\n\n  .am-message-content ol {\n    list-style-type: decimal;\n  }\n\n  /* Nested lists */\n  .am-message-content ul ul,\n  .am-message-content ol ul {\n    list-style-type: circle;\n  }\n\n  .am-message-content ul ul ul,\n  .am-message-content ol ul ul {\n    list-style-type: square;\n  }\n\n  .am-message-content ol ol,\n  .am-message-content ul ol {\n    list-style-type: lower-alpha;\n  }\n\n  .am-message-content ol ol ol,\n  .am-message-content ul ol ol {\n    list-style-type: lower-roman;\n  }\n\n  .am-message-content li {\n    margin: 4px 0;\n    padding-left: 4px;\n    line-height: 1.4;\n    display: list-item; /* Ensures list markers are visible */\n  }\n\n  /* Remove margins for nested lists */\n  .am-message-content li > ul,\n  .am-message-content li > ol {\n    margin: 2px 0;\n  }\n\n  /* Links styling */\n  .am-message-content a {\n    color: #2563eb;\n    text-decoration: none;\n    font-weight: 500;\n  }\n\n  .am-message.user .am-message-content a {\n    color: inherit;\n  }\n\n  .am-message-content a:hover {\n    text-decoration: underline;\n  }\n\n  /* Strong and emphasis */\n  .am-message-content strong {\n    font-weight: 600;\n  }\n\n  .am-message-content em {\n    font-style: italic;\n  }  \n\n  .am-message-content h1,\n  .am-message-content h2,\n  .am-message-content h3,\n  .am-message-content h4,\n  .am-message-content h5,\n  .am-message-content h6 {\n    font-weight: 500;\n    line-height: 1.3;\n    margin: 16px 0 8px 0;  \n  }\n\n  .am-message-content h2,\n  .am-message-content h3 {\n    margin-top: 24px;  /* More space above section headers */\n    margin-bottom: 12px;  /* More space below before content */\n  }  \n\n  .am-message-content h1 { font-size: 1.4em; }\n  .am-message-content h2 { font-size: 1.3em; }\n  .am-message-content h3 { font-size: 1.2em; }\n  .am-message-content h4 { font-size: 1.1em; }\n  .am-message-content h5 { font-size: 1em; }\n  .am-message-content h6 { font-size: 0.9em; }\n\n  /* Ensure first and last headings don\'t add extra spacing */\n  .am-message-content > h1:first-child,\n  .am-message-content > h2:first-child,\n  .am-message-content > h3:first-child,\n  .am-message-content > h4:first-child,\n  .am-message-content > h5:first-child,\n  .am-message-content > h6:first-child {\n    margin-top: 0;\n  }\n\n  .am-message-content > h1:last-child,\n  .am-message-content > h2:last-child,\n  .am-message-content > h3:last-child,\n  .am-message-content > h4:last-child,\n  .am-message-content > h5:last-child,\n  .am-message-content > h6:last-child {\n    margin-bottom: 0;\n  }\n\n  /* Add space after paragraphs */\n  .am-message-content p + h1,\n  .am-message-content p + h2,\n  .am-message-content p + h3,\n  .am-message-content p + h4,\n  .am-message-content p + h5,\n  .am-message-content p + h6 {\n    margin-top: 24px;  /* More space when heading follows paragraph */\n  }  \n\n  /* Adjust list spacing after headers */\n  .am-message-content h1 + ul,\n  .am-message-content h2 + ul,\n  .am-message-content h3 + ul,\n  .am-message-content h4 + ul,\n  .am-message-content h5 + ul,\n  .am-message-content h6 + ul {\n    margin-top: 12px;\n  }\n\n\n  /* Code blocks */\n  .am-message-content code {\n    background: rgba(0, 0, 0, 0.05);\n    padding: 2px 4px;\n    border-radius: 4px;\n    font-family: monospace;\n    font-size: 0.9em;\n  }\n\n  .am-message-content pre {\n    background: rgba(0, 0, 0, 0.05);\n    padding: 12px;\n    border-radius: 8px;\n    overflow-x: auto;\n    margin: 8px 0;\n  }\n\n  .am-message-content pre code {\n    background: none;\n    padding: 0;\n  }\n\n  /* Blockquotes */\n  .am-message-content blockquote {\n    border-left: 4px solid #059669;\n    margin: 8px 0;\n    padding: 4px 12px;\n    color: #4b5563;\n  }\n\n  /* Tables */\n  .am-message-content table {\n    border-collapse: collapse;\n    width: 100%;\n    margin: 8px 0;\n  }\n\n  .am-message-content th,\n  .am-message-content td {\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    padding: 8px;\n    text-align: left;\n  }\n\n  .am-message-content th {\n    background: rgba(0, 0, 0, 0.05);\n    font-weight: 600;\n  }\n\n  /* Remove margin top from first element */\n  .am-message-content > *:first-child {\n    margin-top: 0;\n  }\n\n  /* Remove margin bottom from last element */\n  .am-message-content > *:last-child {\n    margin-bottom: 0;\n  }\n\n\n  @media (max-width: 480px) {\n    .am-message-content {\n      font-size: 13px;\n      padding: 10px 14px;\n    }\n    \n    .am-message-content ul,\n    .am-message-content ol {\n      padding-left: 20px;\n    }\n  }\n',r={corner:"\n      .am-chat-widget--corner {\n        position: fixed;\n        bottom: var(--chat-bottom, 12px);\n        right: var(--chat-right, 12px);\n        z-index: var(--chat-z-index, 1000);\n      }\n  \n      .am-chat-widget--corner .am-chat-container {\n        position: fixed;\n        bottom: var(--chat-container-bottom, 20px);\n        right: var(--chat-container-right, 20px);\n        width: var(--chat-container-width, 360px);\n        height: var(--chat-container-height, 700px);\n      }\n\n      .am-chat-widget--corner .am-chat-toggle {\n        position: fixed !important;\n        bottom: var(--chat-toggle-bottom, 12px) !important;\n        right: var(--chat-toggle-right, 12px) !important;\n        padding: 0 !important;\n        border: none !important;\n        background: var(--chat-toggle-background-color, var(--chat-header-background-color, #059669)) !important;\n        cursor: pointer !important;\n        z-index: var(--chat-z-index, 1000)\n        border-radius: 32px !important;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;\n        transition: transform 0.2s !important;\n        text-transform: none !important;\n        letter-spacing: normal !important;\n        line-height: normal !important;\n        text-decoration: none !important;\n        min-width: auto !important;\n        min-height: auto !important;\n        max-width: none !important;\n        max-height: none !important;\n        width: auto !important;\n        height: auto !important;\n        margin: 0 !important;\n      }\n\n      .am-chat-widget--corner .am-chat-toggle:hover {\n        transform: translateY(-1px) !important;\n        background: var(--chat-toggle-background-color, var(--chat-header-background-color, #059669)) !important;\n        color: var(--chat-toggle-text-color, var(--chat-header-text-color, #FFFFFF)) !important;\n        text-decoration: none !important;\n        border: none !important;\n        outline: none !important;\n      }\n      \n      .am-chat-widget--corner .am-chat-toggle:focus {\n        outline: none !important;\n        box-shadow: 0 0 0 2px rgba(5, 150, 105, 0.5) !important;\n      }\n\n      .am-chat-widget--corner .am-chat-toggle-content {\n        display: flex !important;\n        align-items: center !important;\n        gap: 4px !important;\n        padding: 8px 12px !important;\n        text-transform: none !important;\n        letter-spacing: normal !important;\n        line-height: normal !important;\n        text-decoration: none !important;\n        margin: 0 !important;\n      }\n\n      .am-chat-widget--corner .am-chat-toggle img {\n        width: 24px !important;\n        height: 24px !important;\n        border-radius: 50% !important;\n        max-width: 24px !important;\n        max-height: 24px !important;\n        min-width: 24px !important;\n        min-height: 24px !important;\n        padding: 0 !important;\n        margin: 0 !important;\n        display: inline-block !important;\n        vertical-align: middle !important;\n      }\n\n      .am-chat-widget--corner .am-chat-toggle-text {\n        color: var(--chat-toggle-text-color, var(--chat-header-text-color, #FFFFFF)) !important;\n        font-size: 16px !important;\n        font-weight: 500 !important;\n        text-transform: none !important;\n        letter-spacing: normal !important;\n        text-decoration: none !important;\n      }\n\n      @media (max-width: 640px) {\n        .am-chat-widget--corner .am-chat-toggle {\n          border-radius: 20px;\n        }\n\n        .am-chat-widget--corner .am-chat-toggle-content {\n          padding: 8px 12px;\n          gap: 6px;\n        }\n\n        .am-chat-widget--corner .am-chat-toggle img {\n          width: 20px;\n          height: 20px;\n        }\n\n        .am-chat-widget--corner .am-chat-toggle-text {\n          font-size: 13px;\n        }\n      }\n    ",centered:"\n      .am-chat-widget--centered {\n        position: absolute;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 1rem;\n        inset: var(--chat-inset, 64px 0 0 0);\n      }\n  \n      .am-chat-widget--centered .am-chat-container {\n        width: var(--chat-container-width, 100%);\n        max-width: var(--chat-container-max-width, 500px);\n        height: var(--chat-container-height, 700px);\n        margin: auto;\n        border-radius: var(--chat-container-radius, 8px);\n        display: flex !important;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      }\n    ",inline:"\n      .am-chat-widget--inline {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n  \n      .am-chat-widget--inline .am-chat-container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        box-shadow: none;\n        border-radius: 8px;\n        display: flex;\n        flex-direction: column;\n        border: 1px solid rgba(0, 0, 0, 0.1);\n      }\n\n      .am-chat-widget--inline .am-chat-messages {\n        flex: 1 1 auto;\n        height: 0;\n        min-height: 0;\n      }\n\n      .am-chat-widget--inline .am-chat-input-container {\n        flex: 0 0 auto;\n        border-top: 1px solid rgba(0, 0, 0, 0.1);\n      }\n    "},i="\n  .am-chat-loading-message {\n    padding: 8px 16px;\n    margin: 8px 0;\n    opacity: 1;\n    transition: opacity 0.15s ease-out;\n  }\n\n  .am-chat-loading-message.loading-fade-out {\n    opacity: 0;\n  }\n\n  .am-chat-loading-container {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 8px;\n    border-radius: 12px;\n  }\n\n  @keyframes loading-animation {\n    0%, 80%, 100% { transform: scaleY(1); }\n    40% { transform: scaleY(1.5); }\n  }\n",s="\n  @media (max-width: 640px) {\n    .am-chat-widget--corner .am-chat-container {\n      width: 100%;\n      height: 100vh;\n      bottom: 0;\n      right: 0;\n      border-radius: 0;\n    }\n\n    .am-chat-widget--centered {\n      max-width: 100%;\n      margin: 0 16px;\n    }\n    \n    .desktop-only {\n      display: none !important;\n    }\n  }\n\n  @media (max-width: 480px) {\n    .am-chat-widget--centered {\n      margin: 0;\n    }\n\n    .am-chat-widget--centered .am-chat-container {\n      border-radius: 0;\n    }\n  }\n",c="\n  \n  .am-chat-svg-container {\n    margin: 8px 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 4px;\n    padding: 4px;\n  }\n\n  .am-chat-svg-wrapper {\n    width: 200px;  // Back to original size\n    height: auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .am-chat-svg-wrapper svg {\n    width: 100%;\n    height: auto;\n    display: block;\n  }\n\n  .am-chat-svg-wrapper.small {\n    width: 100px;\n  }\n  .am-chat-svg-wrapper.medium {\n    width: 200px;\n  }\n  .am-chat-svg-wrapper.large {\n    width: 300px;\n  }   \n\n",l="\n  .am-chat-loading-message {\n    padding: 8px 16px;\n    margin: 8px 0;\n    opacity: 1;\n    transition: opacity 0.15s ease-out;\n  }\n\n  .am-chat-loading-message.loading-fade-out {\n    opacity: 0;\n  }\n\n  .am-chat-loading-container {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 8px;\n    border-radius: 12px;\n  }\n\n  .am-chat-loading-bars {\n    display: flex;\n    align-items: center;\n    gap: 3px;\n    height: 20px;\n  }\n\n  .am-chat-loading-bars span {\n    display: inline-block;\n    width: 3px;\n    height: 100%;\n    background-color: var(--chat-secondary-color, #666);\n    border-radius: 3px;\n    animation: loading-animation 1s infinite ease-in-out;\n  }\n\n  .am-chat-loading-bars span:nth-child(1) {\n    animation-delay: -0.32s;\n  }\n\n  .am-chat-loading-bars span:nth-child(2) {\n    animation-delay: -0.16s;\n  }\n\n  @keyframes loading-animation {\n    0%, 80%, 100% {\n      transform: scaleY(1);\n    }\n    40% {\n      transform: scaleY(1.5);\n    }\n  }\n\n  .am-chat-loading-text-wrapper {\n    display: flex;\n    align-items: center;\n    height: 20px;\n  }\n\n  .am-chat-loading-text {\n    color: var(--chat-secondary-color, #666);\n    font-size: 14px;\n    line-height: 1;\n    transition: opacity 0.3s ease-out;\n  }\n",h="\n  /* Message Prompts Container - Using fixed positioning to match toggle button */\n  .am-chat-message-prompts-container {\n    position: fixed !important; /* Match the toggle button's fixed positioning */\n    bottom: 70px !important; /* Position above the toggle button */\n    right: 12px !important; /* Match the toggle's right position */\n    width: 280px; /* Fixed width */\n    min-width: 280px; /* Ensure minimum width */\n    background: transparent; /* Transparent background as requested */\n    padding: 16px 0 16px 16px; /* Remove right padding to align with toggle button */\n    z-index: 10001; /* Ensure it's above other elements */\n    border: none; /* Remove border for cleaner look */\n    word-wrap: break-word; /* Ensure text wraps properly */\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  }\n  \n  /* Adjust position for bottom-left corner widget */\n  .am-chat-bottom-left .am-chat-message-prompts-container {\n    right: auto !important;\n    left: 12px !important;\n  }\n  \n  /* Right-aligned for bottom-right position */\n  .am-chat-bottom-right .am-chat-message-prompts-container {\n    left: auto !important;\n    right: 12px !important;\n  }\n  \n  /* Hide prompts on mobile devices */\n  @media (max-width: 768px) {\n    .am-chat-message-prompts-container {\n      display: none !important; /* Hide on mobile devices */\n    }\n  }\n\n  /* Welcome Message Container */\n  .am-chat-welcome-message {\n    font-size: 14px;\n    margin-bottom: 14px;\n    color: #333;\n    line-height: 1.4;\n    font-weight: 400;\n    padding: 8px 12px 8px 12px;\n    display: flex;\n    flex-direction: column;\n    background-color: white;\n    border-radius: 16px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n    margin-right: 0; /* Ensure right alignment with toggle button */\n  }\n  \n  /* Header with avatar and text */\n  .am-chat-welcome-header {\n    display: flex;\n    align-items: center;\n    margin-bottom: 4px;\n  }\n  \n  /* Avatar styling */\n  .am-chat-welcome-avatar {\n    width: 32px;\n    height: 32px;\n    border-radius: 50%;\n    background-color: var(--chat-toggle-background-color, var(--chat-header-background-color, #059669));\n    margin-right: 8px;\n    flex-shrink: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n  }\n  \n  /* SVG styling */\n  .am-chat-welcome-avatar svg {\n    width: 28px;\n    height: 28px;\n    overflow: visible;\n  }\n  \n  /* Agentman logo colors */\n  .am-chat-welcome-avatar svg ellipse {\n    fill: white;\n  }\n  \n  .am-chat-welcome-avatar svg path {\n    fill: var(--chat-toggle-background-color, var(--chat-header-background-color, #059669));\n    stroke: var(--chat-toggle-background-color, var(--chat-header-background-color, #059669));\n  }\n  \n  /* Fallback styling if SVG fails to render */\n  .am-chat-logo-fallback {\n    display: none;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    background-color: white;\n  }\n  \n  /* Show fallback only if SVG is hidden or fails */\n  .am-chat-welcome-avatar svg:not(:visible) + .am-chat-logo-fallback {\n    display: block;\n  }\n  \n  /* Welcome text */\n  .am-chat-welcome-text {\n    font-weight: 500;\n  }\n  \n  /* Timestamp */\n  .am-chat-welcome-timestamp {\n    font-size: 12px;\n    color: #666;\n    margin-top: 4px;\n    font-weight: 400;\n    margin-left: 32px; /* Align with text after avatar */\n  }\n  \n  /* Prompts Container */\n  .am-chat-message-prompts {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    align-items: flex-end; /* Align buttons to the right */\n    padding-right: 0; /* Remove right padding to align with toggle button */\n  }\n\n  /* Individual Prompt Buttons */\n  .am-chat-message-prompt {\n    background-color: #f8f9fa;\n    color: #000;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    border-radius: 20px;\n    padding: 10px 16px;\n    font-size: 14px;\n    cursor: pointer;\n    text-align: right; /* Right-justified text as requested */\n    transition: all 0.2s ease;\n    line-height: 1.3;\n    font-weight: normal;\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1); /* Box-shadow as requested */\n    width: auto; /* Variable width as requested */\n    display: inline-block; /* Allow width to fit content */\n    max-width: 100%; /* Ensure it doesn't overflow container */\n    margin-right: 0; /* Ensure right alignment with toggle button */\n  }\n\n  .am-chat-message-prompt:hover {\n    background-color: #f0f0f0;\n    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15); /* Enhanced shadow on hover */\n  }\n",d=function(){function e(e){this.styleElement=null,this.variant=e,this.styles=[a,o,c,l,h,r[this.variant],i,s].join("\n")}return e.prototype.injectStyles=function(){this.styleElement=document.createElement("style"),this.styleElement.textContent=this.styles,document.head.appendChild(this.styleElement)},e.prototype.updateStyles=function(e){this.variant=e,this.styleElement&&(this.styleElement.textContent=this.styles)},e.prototype.cleanup=function(){var e;null===(e=this.styleElement)||void 0===e||e.remove(),this.styleElement=null},e}()},44:(e,t,n)=>{n.d(t,{$:()=>o,Z:()=>a});var a=function(e){return"string"==typeof e&&(!e.includes("<")||!e.includes(">"))&&(e.startsWith("/")||e.startsWith("http")||e.startsWith("https"))},o=function(e,t,n){return void 0===n&&(n=32),a(e)?'<img src="'.concat(e,'" alt="').concat(t,'" width="').concat(n,'" height="').concat(n,'"/>'):e}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{ChatWidget:()=>_assistantWidget_ChatWidget__WEBPACK_IMPORTED_MODULE_0__.J});var _assistantWidget_ChatWidget__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(765);return __webpack_exports__=__webpack_exports__.ChatWidget,__webpack_exports__})()));