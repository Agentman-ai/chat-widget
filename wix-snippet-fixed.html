<!-- Agentman Chat Widget for Wix - Force v3.0.7 with Cache Busting -->
<script>
(function() {
    // Force specific version and add cache buster
    var version = '3.0.7';
    var cacheBuster = new Date().getTime(); // Timestamp for cache busting
    var script = document.createElement('script');
    
    // Use specific version instead of @latest
    script.src = 'https://cdn.jsdelivr.net/npm/@agentman/chat-widget@' + version + '/dist/index.js?v=' + cacheBuster;
    
    script.onload = function() {
        console.log('Agentman Chat Widget v' + version + ' loaded');
        
        if (window.AgentmanChatWidget && window.AgentmanChatWidget.ChatWidget) {
            try {
                var widget = new window.AgentmanChatWidget.ChatWidget({
                    agentToken: '.eJyrVipJzUvMK4nPTFGyMjHTUUosKMjJTE4syczPQ4ilp0JVmJqb1gIAxp8Q8Q.aHuyTg.InUeWG97lb8l-N4u39U5p6NCG28',
                    apiUrl: 'https://studio-api.agentman.ai',
                    variant: 'corner',
                    position: 'bottom-right',
                    title: 'AI Assistant',
                    toggleText: 'Ask AI Assistant',
                    placeholder: 'Type your message...',
                    enableWelcomeScreen: true,
                    showFloatingPrompts: true,
                    initialMessage: 'Ready to bring your visual ideas to life!',
                    messagePrompts: {
                        show: true,
                        welcome_message: 'What can I help you with?',
                        prompts: [
                            'Help with trade show displays',
                            'Explore printing services',
                            'Custom signage options',
                            'Book an appointment'
                        ]
                    },
                    theme: {
                        backgroundColor: '#ffffff',
                        textColor: '#111827',
                        buttonColor: '#2563eb',
                        buttonTextColor: '#ffffff',
                        agentForegroundColor: '#111827',
                        userForegroundColor: '#2563eb',
                        toggleBackgroundColor: '#6FE267',
                        toggleTextColor: '#ffffff',
                        toggleIconColor: '#ffffff'
                    },
                    persistence: {
                        enabled: true,
                        days: 7
                    },
                    enableAttachments: true
                });
                
                console.log('Widget initialized with green toggle (#6FE267)');
                
                // Debug: Check if colors are applied after a brief delay
                setTimeout(function() {
                    var toggleBtn = document.querySelector('.am-chat-toggle');
                    if (toggleBtn) {
                        var styles = window.getComputedStyle(toggleBtn);
                        console.log('Toggle button background:', styles.backgroundColor);
                        console.log('Expected: rgb(111, 226, 103) / #6FE267');
                    }
                }, 1000);
                
            } catch (error) {
                console.error('Error initializing chat widget:', error);
            }
        } else {
            console.error('AgentmanChatWidget not found on window');
        }
    };
    
    script.onerror = function() {
        console.error('Failed to load Agentman Chat Widget v' + version);
    };
    
    document.head.appendChild(script);
})();
</script>