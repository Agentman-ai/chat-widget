<!DOCTYPE html>
<html>
<head>
    <title>Test CDN Loading</title>
</head>
<body>
    <h1>Testing CDN Loading</h1>
    <div id="status"></div>
    
    <script src="dist/index.js"></script>
    <script>
        const statusEl = document.getElementById('status');
        
        // Wait for script to load
        setTimeout(() => {
            console.log('Window object:', window);
            console.log('Window keys:', Object.keys(window));
            
            // Check different possible locations
            const checks = [
                { name: 'window.ChatWidget', value: window.ChatWidget },
                { name: 'window.AgentmanChatWidget', value: window.AgentmanChatWidget },
                { name: 'window["AgentmanChatWidget"]', value: window["AgentmanChatWidget"] },
                { name: 'window["@agentman/chat-widget"]', value: window["@agentman/chat-widget"] },
                { name: 'window["agentman/chat-widget"]', value: window["agentman/chat-widget"] },
                { name: 'window.agentman', value: window.agentman },
                { name: 'window["@agentman"]', value: window["@agentman"] }
            ];
            
            let html = '<h2>Checking for ChatWidget in various locations:</h2><ul>';
            checks.forEach(check => {
                const exists = check.value !== undefined;
                html += `<li>${check.name}: ${exists ? '✅ Found' : '❌ Not found'}`;
                if (exists) {
                    html += ` (type: ${typeof check.value})`;
                    if (typeof check.value === 'object') {
                        html += `, keys: ${Object.keys(check.value).join(', ')}`;
                    }
                }
                html += '</li>';
                console.log(check.name, check.value);
            });
            html += '</ul>';
            
            // Also check all window properties that might be related
            html += '<h2>All window properties containing "agent" or "chat":</h2><ul>';
            Object.keys(window).forEach(key => {
                if (key.toLowerCase().includes('agent') || key.toLowerCase().includes('chat')) {
                    html += `<li>${key}: ${typeof window[key]}</li>`;
                }
            });
            html += '</ul>';
            
            statusEl.innerHTML = html;
        }, 1000);
    </script>
</body>
</html>
